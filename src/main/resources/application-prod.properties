# ============================================================================
# Production Configuration for Render
# ============================================================================
# ??????: spring.profiles.active=prod (???????? ????? Environment Variables!)
spring.application.name=LandOfChokolate

# Server Configuration
server.port=${PORT:8080}
app.base-url=${APP_BASE_URL:https://your-app-name.onrender.com}

# ============================================================================
# Database Configuration (Render PostgreSQL)
# ============================================================================
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# JPA Configuration for Production
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.open-in-view=false

# Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ============================================================================
# Security & HTTPS
# ============================================================================
server.forward-headers-strategy=framework
server.tomcat.redirect-context-root=false
server.tomcat.use-relative-redirects=true

# ============================================================================
# LiqPay Configuration
# ============================================================================
liqpay.public_key=${LIQPAY_PUBLIC_KEY}
liqpay.private_key=${LIQPAY_PRIVATE_KEY}

# ============================================================================
# File Upload Configuration
# ============================================================================
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# ============================================================================
# Cloudinary Configuration
# ============================================================================
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# ============================================================================
# Email Configuration
# ============================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ============================================================================
# Cart Configuration
# ============================================================================
app.cart.cleanup.enabled=true
app.cart.cleanup.delete-threshold-days=30
app.cart.cookie.max-age=2592000
app.cart.expiration.days=30

# ============================================================================
# Wishlist Configuration
# ============================================================================
app.wishlist.cookie.max-age=31536000
app.wishlist.expiration.days=365
app.wishlist.cookie.name=WISHLIST_ID

# ============================================================================
# Server Configuration for Production
# ============================================================================
server.tomcat.max-threads=200
server.tomcat.accept-count=100
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# ============================================================================
# Async Configuration
# ============================================================================
spring.task.execution.pool.core-size=4
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=200

# ============================================================================
# Logging Configuration for Production
# ============================================================================
logging.level.root=INFO
logging.level.com.example.landofchokolate=INFO
logging.level.org.springframework.cache=${CACHE_LOG_LEVEL:WARN}
logging.level.com.github.benmanes.caffeine=${CACHE_LOG_LEVEL:WARN}
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Log to console for Render
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ============================================================================
# Cache Configuration
# ============================================================================
spring.cache.caffeine.spec=recordStats=true

# ============================================================================
# Health Check & Monitoring
# ============================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true

# ============================================================================
# Performance Optimizations
# ============================================================================
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true