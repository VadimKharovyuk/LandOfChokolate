# ============================================================================
# Render Deployment Configuration
# ============================================================================
spring.application.name=LandOfChokolate

# Server Configuration
server.port=${PORT:10000}
app.base-url=${APP_BASE_URL}

# ============================================================================
# Database Configuration (Render PostgreSQL)
# ============================================================================
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# ?????: Database Connection Pool -
# Database -
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=30000


# JPA and Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.open-in-view=false

# ?????: Hibernate ??????????? ??? ???????? ??????
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# ============================================================================
# LiqPay Payment Configuration
# ============================================================================
liqpay.public_key=${LIQPAY_PUBLIC_KEY}
liqpay.private_key=${LIQPAY_PRIVATE_KEY}

# ============================================================================
# File Upload Configuration - ?????????
# ============================================================================
spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=2MB

# ============================================================================
# Cloudinary Configuration
# ============================================================================
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}


# ============================================================================
# Nova Poshta Configuration
# ============================================================================
novaposhta.api.key=${NOVAPOSHTA_API_KEY}
novaposhta.api.url=${NOVAPOSHTA_API_URL:https://api.novaposhta.ua/v2.0/json/}
novaposhta.city-sender=${NOVAPOSHTA_CITY_SENDER}
novaposhta.sender=${NOVAPOSHTA_SENDER_REF}
novaposhta.sender-address=${NOVAPOSHTA_SENDER_ADDRESS}
novaposhta.contact-sender=${NOVAPOSHTA_CONTACT_SENDER_REF}
novaposhta.sender-phone=${NOVAPOSHTA_SENDER_PHONE:380983774736}

# ============================================================================
# Email Configuration - ??????????????
# ============================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=3000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=3000

# ============================================================================
# Cart Configuration - ????????? ????? ?????
# ============================================================================
app.cart.cleanup.enabled=true
app.cart.cleanup.delete-threshold-days=7
app.cart.cookie.max-age=604800
app.cart.expiration.days=7

# ============================================================================
# Wishlist Configuration - ????????? ????? ?????
# ============================================================================
app.wishlist.cookie.max-age=2592000
app.wishlist.expiration.days=30
app.wishlist.cookie.name=WISHLIST_ID

# ============================================================================
# Server Configuration - ???????? ??????????????!
# ============================================================================
# ????????? ?????????? ??????? ??? ?????? ??????
server.tomcat.max-threads=30
server.tomcat.min-spare-threads=3
server.tomcat.max-connections=80
server.tomcat.accept-count=20




# ??????????? ?????? Tomcat
server.tomcat.max-http-form-post-size=1MB
server.tomcat.max-save-post-size=1MB

# ?????: Session ???????????
# ????? ???????? timeout ??? ???????????? ?????? JVM
server.servlet.session.timeout=10m
server.servlet.session.cookie.max-age=600

# ============================================================================
# Async Configuration - ?????????
# ============================================================================
spring.task.execution.pool.core-size=1
spring.task.execution.pool.max-size=2
spring.task.execution.pool.queue-capacity=50
spring.task.execution.pool.keep-alive=60s

# ============================================================================
# ?????: HTTP Client Configuration
# ============================================================================
spring.http.client.timeout.connect=5s
spring.http.client.timeout.read=10s

# ============================================================================
# ?????: JSON ???????????
# ============================================================================
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.serialization.write-dates-as-timestamps=false

# ============================================================================
# Logging Configuration - ??????????? ???? ??? ???????? ????????
# ============================================================================
logging.level.root=WARN
logging.level.com.example.landofchokolate=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.apache.tomcat=WARN

# ????????? ???????? ????
logging.level.org.springframework.web=ERROR
logging.level.org.springframework.security=ERROR
logging.level.org.springframework.cache=ERROR
logging.level.com.github.benmanes.caffeine=ERROR
logging.level.com.example.landofchokolate.service.MemoryMonitoringService=ERROR

# ============================================================================
# ?????: Management endpoints - ????????? ??? ???????? ????????
# ============================================================================
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoints.web.exposure.include=health

# ============================================================================
# ?????: Spring Boot DevTools - ????????? ? ??????????
# ============================================================================
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false