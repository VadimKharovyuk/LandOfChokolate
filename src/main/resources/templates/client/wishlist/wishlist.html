<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Избранное - Land of Chocolate</title>
    <meta name="description" content="Избранные товары - Land of Chocolate">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/fragment/navigation.css}">
<!--    <link rel="stylesheet" th:href="@{/css/fragment/footer.css}">-->
    <link rel="stylesheet" th:href="@{/css/fragment/footer-light.css}">
    <link rel="stylesheet" th:href="@{/css/fragment/mobile-bottom-nav.css}">


    <style>
        :root {
            --primary-dark: #2C2C2C;
            --primary-medium: #5A5A5A;
            --primary-light: #FAFAFA;
            --accent-gold: #D4AF37;
            --accent-warm: #F5F5F0;
            --text-primary: #1A1A1A;
            --text-secondary: #757575;
            --border-subtle: #E8E8E8;
            --shadow-soft: rgba(0, 0, 0, 0.04);
            --shadow-medium: rgba(0, 0, 0, 0.08);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --wishlist-color: #e91e63;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            line-height: 1.7;
            color: var(--text-primary);
            background-color: #FFFFFF;
            letter-spacing: -0.01em;
        }

        .serif-font {
            font-family: 'Cormorant Garamond', serif;
        }

        /* Основной контент с отступом от навигации */
        .main-content {
            margin-top: 80px;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Breadcrumbs */
        .breadcrumb-container {
            padding: 2rem 0 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb {
            background: none;
            padding: 0;
            margin: 0;
            font-size: 0.9rem;
        }

        .breadcrumb-item {
            color: var(--text-secondary);
        }

        .breadcrumb-item a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-item a:hover {
            color: var(--text-primary);
        }

        .breadcrumb-item.active {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Wishlist Header */
        .wishlist-header {
            padding: 4rem 0 3rem;
            text-align: center;
        }

        .wishlist-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 400;
            color: var(--text-primary);
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .wishlist-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Wishlist Content */
        .wishlist-section {
            padding: 3rem 0;
        }

        .wishlist-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 4rem;
            align-items: start;
        }

        /* Wishlist Items */
        .wishlist-items {
            background: #FFFFFF;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            overflow: hidden;
        }

        .wishlist-items-header {
            background: var(--accent-warm);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wishlist-items-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--text-primary);
            margin: 0;
        }

        .wishlist-count {
            background: var(--wishlist-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .wishlist-item {
            display: grid;
            grid-template-columns: 120px 1fr auto auto;
            gap: 1.5rem;
            align-items: center;
            padding: 2rem;
            border-bottom: 1px solid var(--border-subtle);
            transition: all 0.3s ease;
            position: relative;
        }

        .wishlist-item:last-child {
            border-bottom: none;
        }

        .wishlist-item:hover {
            background: var(--primary-light);
        }

        .wishlist-item-image {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            background: var(--accent-warm);
            position: relative;
        }

        .wishlist-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .wishlist-item-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #F8F8F8 0%, #F0F0F0 100%);
            color: var(--text-secondary);
            font-size: 2rem;
        }

        .wishlist-item-details {
            min-width: 0;
        }

        .wishlist-item-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .wishlist-item-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .wishlist-item-title a:hover {
            color: var(--wishlist-color);
        }

        .wishlist-item-price {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .wishlist-item-info {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .wishlist-item-stock {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .wishlist-item-added {
            color: var(--text-secondary);
        }

        .status-available {
            color: var(--success-color);
        }

        .status-unavailable {
            color: var(--danger-color);
        }

        .status-out-of-stock {
            color: var(--warning-color);
        }

        /* Item Actions */
        .wishlist-item-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: center;
        }

        .btn-add-to-cart {
            background: var(--text-primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .btn-add-to-cart:hover:not(:disabled) {
            background: var(--primary-medium);
            transform: translateY(-1px);
        }

        .btn-add-to-cart:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-remove-wishlist {
            background: none;
            border: 1px solid var(--border-subtle);
            border-radius: 4px;
            color: var(--wishlist-color);
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-remove-wishlist:hover {
            background: var(--wishlist-color);
            color: white;
            border-color: var(--wishlist-color);
        }

        /* Wishlist Summary */
        .wishlist-summary {
            background: #FFFFFF;
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 2rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .wishlist-summary-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .summary-label {
            color: var(--text-secondary);
        }

        .summary-value {
            font-weight: 500;
            color: var(--text-primary);
        }

        .wishlist-actions {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .btn-clear-wishlist {
            background: none;
            color: var(--danger-color);
            border: 1px solid var(--border-subtle);
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-weight: 400;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .btn-clear-wishlist:hover {
            background: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
        }

        /* Continue Shopping */
        .continue-shopping {
            margin-top: 3rem;
            text-align: center;
        }

        .btn-continue {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: none;
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
            padding: 1rem 2rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 400;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .btn-continue:hover {
            background: var(--primary-light);
            color: var(--text-primary);
            text-decoration: none;
            transform: translateY(-1px);
        }

        /* Empty Wishlist */
        .empty-wishlist {
            text-align: center;
            padding: 6rem 0;
        }

        .empty-icon {
            font-size: 4rem;
            color: var(--wishlist-color);
            margin-bottom: 2rem;
        }

        .empty-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            font-weight: 400;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .empty-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 500px;
            margin: 0 auto 2rem;
            line-height: 1.6;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--text-primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: var(--primary-medium);
            color: white;
            text-decoration: none;
            transform: translateY(-1px);
        }

        /* Адаптивность */
        @media (max-width: 992px) {
            .wishlist-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .wishlist-summary {
                position: static;
            }

            .wishlist-item {
                grid-template-columns: 80px 1fr auto;
                gap: 1rem;
                padding: 1.5rem;
            }

            .wishlist-item-actions {
                flex-direction: row;
                gap: 0.5rem;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 1.5rem;
            }

            .wishlist-header {
                padding: 3rem 0 2rem;
            }

            .wishlist-title {
                font-size: 2.5rem;
            }

            .wishlist-item {
                grid-template-columns: 1fr;
                gap: 1rem;
                text-align: center;
            }

            .wishlist-item-image {
                justify-self: center;
                width: 100px;
                height: 100px;
            }

            .wishlist-item-actions {
                flex-direction: column;
                gap: 0.75rem;
            }
        }

        /* Loading state */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .spinner {
            width: 1rem;
            height: 1rem;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
<!-- Навигация -->
<div th:insert="~{admin/fragments/navigation :: navigation}"></div>

<!-- Основной контент -->
<div class="main-content">
    <div class="main-container">
        <!-- Хлебные крошки -->
        <nav class="breadcrumb-container" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Головна</a></li>
                <li class="breadcrumb-item active" aria-current="page">Вибране</li>
            </ol>
        </nav>

        <!-- Заголовок избранного -->
        <header class="wishlist-header">
            <h1 class="wishlist-title">
                <i class="fas fa-heart" style="color: var(--wishlist-color);"></i>
                Вибране
            </h1>
            <p class="wishlist-subtitle" th:if="${!wishlist.isEmpty}">
                У вас <span th:text="${wishlist.totalItems}">3</span> товарів у вибраному
            </p>
        </header>

        <!-- Содержимое избранного -->
        <section class="wishlist-section" th:if="${!wishlist.isEmpty}">
            <div class="wishlist-container">
                <!-- Список товаров -->
                <div class="wishlist-items">
                    <div class="wishlist-items-header">
                        <h2 class="wishlist-items-title">Ваші улюблені товари</h2>
                        <span class="wishlist-count" th:text="${wishlist.totalItems}">3</span>
                    </div>

                    <!-- Товары в избранном -->
                    <div class="wishlist-item"
                         th:each="item : ${wishlist.items}"
                         th:data-wishlist-item="${item.product.id}">

                        <!-- Изображение товара -->
                        <div class="wishlist-item-image">
                            <img th:if="${item.product.imageUrl != null and !item.product.imageUrl.isEmpty()}"
                                 th:src="${item.product.imageUrl}"
                                 th:alt="${item.product.name}">
                            <div th:if="${item.product.imageUrl == null or item.product.imageUrl.isEmpty()}"
                                 class="wishlist-item-placeholder">
                                <i class="fas fa-image"></i>
                            </div>
                        </div>

                        <!-- Деталі товару -->
                        <div class="wishlist-item-details">
                            <h3 class="wishlist-item-title">
                                <a th:href="@{'/product/' + ${item.product.slug}}" th:text="${item.product.name}">
                                    Назва товару
                                </a>
                            </h3>

                            <div class="wishlist-item-price" th:text="${item.product.currentPrice} + ' грн'">
                                150 грн
                            </div>

                            <div class="wishlist-item-info">
                                <div class="wishlist-item-stock">
            <span th:if="${item.product.available}" class="status-available">
                <i class="fas fa-check-circle"></i> В наявності
            </span>
                                    <span th:if="${!item.product.active}" class="status-unavailable">
                <i class="fas fa-times-circle"></i> Недоступний
            </span>
                                    <span th:if="${item.product.active and !item.product.inStock}" class="status-out-of-stock">
                <i class="fas fa-exclamation-triangle"></i> Немає в наявності
            </span>
                                </div>

                                <div class="wishlist-item-added">
                                    <i class="fas fa-calendar"></i>
                                    <span th:text="${#temporals.format(item.addedAt, 'dd.MM.yyyy')}">15.12.2024</span>
                                </div>
                            </div>
                        </div>

                        <!-- Действия с товаром -->
                        <div class="wishlist-item-actions">
                            <button class="btn-add-to-cart"
                                    th:data-product-id="${item.product.id}"
                                    th:disabled="${!item.product.available}"
                                    th:title="${item.product.available ? 'Добавить в корзину' : 'Товар недоступен'}"
                                    onclick="addToCartFromWishlist(this)">
                                <i class="fas fa-shopping-cart"></i>
                                <span th:text="${item.product.available ? 'До кошика' : 'Недоступний'}">До кошика</span>
                            </button>

                            <button class="btn-remove-wishlist"
                                    th:data-product-id="${item.product.id}"
                                    onclick="removeFromWishlist(this)"
                                    title="Удалить из избранного">
                                <i class="fas fa-heart-broken"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Итоги избранного -->
                <div class="wishlist-summary">
                    <h3 class="wishlist-summary-title">Інформація</h3>

                    <div class="summary-row">
                        <span class="summary-label">Товарів у вибраному:</span>
                        <span class="summary-value" th:text="${wishlist.totalItems}">3</span>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Доступно для покупки:</span>
                        <span class="summary-value">
            <th:block th:with="availableCount=0">
                <th:block th:each="item : ${wishlist.items}">
                    <th:block th:if="${item.product.available}" th:with="availableCount=${availableCount + 1}"></th:block>
                </th:block>
                <span th:text="${availableCount}">0</span>
            </th:block>
        </span>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Загальна вартість:</span>
                        <span class="summary-value">
            <th:block th:with="totalPrice=0">
                <th:block th:each="item : ${wishlist.items}">
                    <th:block th:if="${item.product.available}"
                              th:with="totalPrice=${totalPrice + item.product.currentPrice}"></th:block>
                </th:block>
                <span th:text="${totalPrice + ' грн'}">0 грн</span>
            </th:block>
        </span>
                    </div>

                    <div class="wishlist-actions">
                        <button class="btn-clear-wishlist" onclick="clearWishlist()">
                            <i class="fas fa-trash"></i>
                            Очистити вибране
                        </button>
                    </div>
                </div>
            </div>

            <!-- Продолжить покупки -->
            <div class="continue-shopping">
                <a href="/categories" class="btn-continue">
                    <i class="fas fa-arrow-left"></i>
                    Продовжити покупки
                </a>
            </div>
        </section>

        <!-- Порожнє вибране -->
        <section class="empty-wishlist" th:if="${wishlist.isEmpty}">
            <div class="empty-icon">
                <i class="fas fa-heart"></i>
            </div>
            <h2 class="empty-title">Ваше вибране порожнє</h2>
            <p class="empty-description">
                Додавайте товари у вибране, щоб не втратити їх з поля зору.
                Усі улюблені шоколадні вироби зберігатимуться тут!
            </p>
            <a href="/categories" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Розпочати покупки
            </a>
        </section>
    </div>
</div>

<!-- Подвал -->
<!--<div th:insert="~{admin/fragments/footer :: footer}"></div>-->
<footer th:replace="~{admin/fragments/fototerLigth :: footer}"></footer>


<script th:src="@{/js/scrollTopButton.js}"></script>

<!-- Мобильная навигация снизу  -->
<div th:replace="~{admin/fragments/mobile-bottom-nav :: mobile-bottom-navigation}"></div>
<script th:replace="~{admin/fragments/mobile-bottom-nav :: mobile-bottom-navigation-script}"></script>



<!-- JavaScript -->
<script th:replace="~{admin/fragments/navigation :: navigation-script}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/wishlist/addToCartFromWishlist.js"></script>

</body>
</html>
