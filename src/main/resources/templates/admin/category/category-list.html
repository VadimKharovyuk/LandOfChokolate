<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</title>
</head>
<body>
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —É—á–µ—Ç–æ–º –ø–æ–∏—Å–∫–∞ -->
<h1 th:if="${isSearch == null or !isSearch}">–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h1>
<h1 th:if="${isSearch != null and isSearch}">
    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É: "<span th:text="${searchQuery}"></span>"
</h1>

<!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
<div th:if="${successMessage}" style="color: green; border: 1px solid green; padding: 10px; margin: 10px 0;">
    <span th:text="${successMessage}"></span>
</div>

<div th:if="${errorMessage}" style="color: red; border: 1px solid red; padding: 10px; margin: 10px 0;">
    <span th:text="${errorMessage}"></span>
</div>

<!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
<div style="margin: 20px 0; display: flex; justify-content: space-between; align-items: center;">
    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div>
        <a th:href="@{/admin/category}"
           style="padding: 10px 20px; background-color: #28a745; color: white; text-decoration: none; display: inline-block;">
            + –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        </a>
    </div>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <div>
        <form th:action="@{/admin/category/search}" method="get" style="display: inline-flex; align-items: center;">
            <input type="text" name="name" th:value="${searchQuery}"
                   placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..."
                   style="padding: 8px; margin-right: 10px; width: 200px;">
            <button type="submit"
                    style="padding: 8px 15px; background-color: #007bff; color: white; border: none; cursor: pointer;">
                –ü–æ–∏—Å–∫
            </button>
            <a th:href="@{/admin/category/list}"
               style="margin-left: 10px; padding: 8px 15px; background-color: #6c757d; color: white; text-decoration: none;">
                –°–±—Ä–æ—Å–∏—Ç—å
            </a>
        </form>
    </div>
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<div th:if="${categories != null and !categories.isEmpty()}">
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ -->
    <h2 th:if="${isSearch == null or !isSearch}">
        –í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: <span th:text="${categories.size()}"></span>
    </h2>
    <h2 th:if="${isSearch != null and isSearch}">
        –ù–∞–π–¥–µ–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: <span th:text="${categories.size()}"></span>
    </h2>

    <table border="1" style="border-collapse: collapse; width: 100%; margin: 20px 0;">
        <thead style="background-color: #f8f9fa;">
        <tr>
            <th style="padding: 10px; text-align: center;">–§–æ—Ç–æ</th>
            <th style="padding: 10px; text-align: left;">ID</th>
            <th style="padding: 10px; text-align: left;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th style="padding: 10px; text-align: left;">Slug</th>
            <th style="padding: 10px; text-align: left;">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</th>
            <th style="padding: 10px; text-align: left;">Meta Title</th>
            <th style="padding: 10px; text-align: left;">Meta Description</th>
            <th style="padding: 10px; text-align: center;">–°—Ç–∞—Ç—É—Å</th>
            <th style="padding: 10px; text-align: center;">–°–æ–∑–¥–∞–Ω–∞</th>
            <th style="padding: 10px; text-align: center;">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="category : ${categories}">
            <!-- üÜï –°—Ç–æ–ª–±–µ—Ü —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
            <td style="padding: 10px; text-align: center; width: 80px;">
                <div th:if="${category.imageUrl != null and !category.imageUrl.isEmpty()}">
                    <img th:src="${category.imageUrl}"
                         th:alt="${category.name}"
                         style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd;">
                </div>
                <div th:if="${category.imageUrl == null or category.imageUrl.isEmpty()}"
                     style="width: 60px; height: 60px; background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #6c757d; font-size: 12px;">
                    –ù–µ—Ç —Ñ–æ—Ç–æ
                </div>
            </td>

            <td style="padding: 10px;" th:text="${category.id}"></td>
            <td style="padding: 10px; font-weight: bold;" th:text="${category.name}"></td>
            <td style="padding: 10px; font-family: monospace; color: #6c757d; max-width: 120px; word-wrap: break-word;"
                th:text="${category.slug}"></td>
            <td style="padding: 10px; max-width: 200px; word-wrap: break-word;"
                th:text="${category.shortDescription}"></td>
            <td style="padding: 10px; max-width: 150px; word-wrap: break-word; color: #6c757d;"
                th:text="${category.metaTitle != null and !category.metaTitle.isEmpty()} ? ${category.metaTitle} : '‚Äî'"></td>
            <td style="padding: 10px; max-width: 150px; word-wrap: break-word; color: #6c757d;"
                th:text="${category.metaDescription != null and !category.metaDescription.isEmpty()} ? ${category.metaDescription} : '‚Äî'"></td>
            <td style="padding: 10px; text-align: center;">
                <span th:if="${category.isActive != null and category.isActive}"
                      style="color: #28a745; font-weight: bold;">‚úì –ê–∫—Ç–∏–≤–Ω–∞</span>
                <span th:if="${category.isActive == null or !category.isActive}"
                      style="color: #dc3545; font-weight: bold;">‚úó –ù–µ–∞–∫—Ç–∏–≤–Ω–∞</span>
            </td>
            <td style="padding: 10px; text-align: center; font-size: 12px; color: #6c757d;"
                th:text="${category.createdAt != null} ? ${#temporals.format(category.createdAt, 'dd.MM.yyyy HH:mm')} : '‚Äî'"></td>
            <td style="padding: 10px; text-align: center;">
                <a th:href="@{'/admin/category/edit/' + ${category.id}}"
                   style="color: #007bff; text-decoration: none; margin-right: 10px;">
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
                <a th:href="@{'/admin/category/delete/' + ${category.id}}"
                   style="color: #dc3545; text-decoration: none;"
                   onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é?')">
                    –£–¥–∞–ª–∏—Ç—å
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- –°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç -->
<div th:if="${categories == null or categories.isEmpty()}"
     style="padding: 20px; background-color: #f8f9fa; border: 1px solid #dee2e6; margin: 20px 0;">
    <h3 th:if="${isSearch == null or !isSearch}">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <h3 th:if="${isSearch != null and isSearch}">–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>

    <p th:if="${isSearch == null or !isSearch}">–ü–æ–∫–∞ —á—Ç–æ –Ω–∏ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ.</p>
    <p th:if="${isSearch != null and isSearch}">
        –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏
        <a th:href="@{/admin/category/list}">–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
    </p>

    <a th:href="@{/admin/category}"
       style="padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; display: inline-block;">
        <span th:if="${isSearch == null or !isSearch}">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
        <span th:if="${isSearch != null and isSearch}">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
    </a>
</div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<div style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px;">
    <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è:</h3>
    <ul>
        <li><a th:href="@{/admin/category}">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</a></li>
        <li><a th:href="@{/admin/category/list}">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</a></li>
        <li><a th:href="@{/admin/brand/list}">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞–º–∏</a></li>
    </ul>
</div>

<!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
<div style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px; background-color: #f8f9fa; padding: 10px;">
    <h4>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>
    <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –º–æ–¥–µ–ª–∏: <span th:text="${categories != null ? categories.size() : 'null'}"></span></p>
    <p>–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å: <span th:text="${searchQuery != null ? searchQuery : '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}"></span></p>
    <p>–†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞: <span th:text="${isSearch != null and isSearch ? '–¥–∞' : '–Ω–µ—Ç'}"></span></p>
    <p>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: <span th:text="${#temporals.format(#temporals.createNow(), 'dd.MM.yyyy HH:mm:ss')}"></span></p>
</div>
</body>
</html>