<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–¥—É–∫—Ç–∞</title>
</head>
<body>
<h1>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ</h1>

<!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
<div th:if="${successMessage}" style="color: green; border: 1px solid green; padding: 10px; margin: 10px 0;">
  <span th:text="${successMessage}"></span>
</div>

<div th:if="${errorMessage}" style="color: red; border: 1px solid red; padding: 10px; margin: 10px 0;">
  <span th:text="${errorMessage}"></span>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ -->
<div style="display: flex; gap: 30px; margin: 20px 0;">

  <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
  <div style="flex: 0 0 300px;">
    <div th:if="${product.imageUrl != null and !product.imageUrl.isEmpty()}">
      <img th:src="${product.imageUrl}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞"
           style="width: 100%; max-width: 300px; border: 1px solid #ddd; border-radius: 8px;">
    </div>
    <div th:if="${product.imageUrl == null or product.imageUrl.isEmpty()}"
         style="width: 300px; height: 200px; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center; color: #666; background-color: #f8f9fa;">
      –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    </div>
  </div>

  <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
  <div style="flex: 1;">
    <h2 th:text="${product.name}" style="margin: 0 0 20px 0; color: #333;"></h2>

    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
      <table style="width: 100%; border-collapse: collapse;">
        <tr>
          <td style="padding: 8px; font-weight: bold; border-bottom: 1px solid #dee2e6;">ID:</td>
          <td style="padding: 8px; border-bottom: 1px solid #dee2e6;" th:text="${product.id}"></td>
        </tr>
        <tr>
          <td style="padding: 8px; font-weight: bold; border-bottom: 1px solid #dee2e6;">–¶–µ–Ω–∞:</td>
          <td style="padding: 8px; border-bottom: 1px solid #dee2e6; font-size: 18px; font-weight: bold; color: #007bff;">
            <span th:text="${#numbers.formatDecimal(product.price, 0, 2)} + ' –≥—Ä–Ω.'"></span>
          </td>
        </tr>
        <tr>
          <td style="padding: 8px; font-weight: bold; border-bottom: 1px solid #dee2e6;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ:</td>
          <td style="padding: 8px; border-bottom: 1px solid #dee2e6;">
                        <span th:text="${product.stockQuantity}"
                              th:style="${product.stockQuantity == 0 ? 'color: red; font-weight: bold;' : (product.stockQuantity < 10 ? 'color: orange; font-weight: bold;' : 'color: green; font-weight: bold;')}"></span>

            <!-- –°—Ç–∞—Ç—É—Å -->
            <span th:if="${product.stockQuantity == 0}"
                  style="margin-left: 10px; padding: 3px 8px; background-color: #dc3545; color: white; border-radius: 3px; font-size: 11px;">
                            –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏
                        </span>
            <span th:if="${product.stockQuantity > 0 and product.stockQuantity < 10}"
                  style="margin-left: 10px; padding: 3px 8px; background-color: #ffc107; color: black; border-radius: 3px; font-size: 11px;">
                            –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è
                        </span>
            <span th:if="${product.stockQuantity >= 10}"
                  style="margin-left: 10px; padding: 3px 8px; background-color: #28a745; color: white; border-radius: 3px; font-size: 11px;">
                            –í –Ω–∞–ª–∏—á–∏–∏
                        </span>
          </td>
        </tr>
        <tr>
          <td style="padding: 8px; font-weight: bold; border-bottom: 1px solid #dee2e6;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</td>
          <td style="padding: 8px; border-bottom: 1px solid #dee2e6;">
            <span th:text="${product.category.name}"></span>
            <small style="color: #666;" th:text="'(ID: ' + ${product.category.id} + ')'"></small>
          </td>
        </tr>
        <tr>
          <td style="padding: 8px; font-weight: bold;">–ë—Ä–µ–Ω–¥:</td>
          <td style="padding: 8px;">
            <span th:text="${product.brand.name}"></span>
            <small style="color: #666;" th:text="'(ID: ' + ${product.brand.id} + ')'"></small>

            <!-- –õ–æ–≥–æ—Ç–∏–ø –±—Ä–µ–Ω–¥–∞ -->
            <div th:if="${product.brand.imageUrl != null and !product.brand.imageUrl.isEmpty()}" style="margin-top: 5px;">
              <img th:src="${product.brand.imageUrl}" alt="–õ–æ–≥–æ—Ç–∏–ø –±—Ä–µ–Ω–¥–∞"
                   style="max-width: 50px; max-height: 30px; border: 1px solid #ddd; border-radius: 3px;">
            </div>
          </td>
        </tr>
      </table>
    </div>

    <!-- –ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ -->
    <div style="background-color: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
      <h4 style="margin: 0 0 10px 0;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏:</h4>
      <form th:action="@{'/admin/product/stock/update/' + ${product.id}}" method="post" style="display: inline-flex; align-items: center; gap: 10px;">
        <label for="quantity">–ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
        <input type="number" id="quantity" name="quantity" th:value="${product.stockQuantity}"
               min="0" step="1" style="width: 100px; padding: 5px;">
        <button type="submit" style="padding: 5px 15px; background-color: #007bff; color: white; border: none; cursor: pointer; border-radius: 3px;">
          –û–±–Ω–æ–≤–∏—Ç—å
        </button>
      </form>
    </div>
  </div>
</div>

<!-- –î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º -->
<div style="margin: 30px 0; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
  <h3>–î–µ–π—Å—Ç–≤–∏—è:</h3>
  <div style="display: flex; gap: 10px; flex-wrap: wrap;">
    <a th:href="@{'/admin/product/edit/' + ${product.id}}"
       style="padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">
      ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    </a>
    <a th:href="@{'/admin/product/delete/' + ${product.id}}"
       style="padding: 10px 20px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px;"
       onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–¥—É–∫—Ç?')">
      üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
    </a>
    <a th:href="@{/admin/product/list}"
       style="padding: 10px 20px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px;">
      üìã –ö —Å–ø–∏—Å–∫—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    </a>
    <a th:href="@{/admin/product}"
       style="padding: 10px 20px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">
      ‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
    </a>
  </div>
</div>

<!-- –°–≤—è–∑–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
<div style="display: flex; gap: 20px; margin: 30px 0;">

  <!-- –î—Ä—É–≥–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ç–æ–π –∂–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div style="flex: 1; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
    <h4>–î—Ä—É–≥–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "<span th:text="${product.category.name}"></span>":</h4>
    <a th:href="@{/admin/product/list(category=${product.category.id})}"
       style="color: #007bff; text-decoration: none;">
      –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí
    </a>
  </div>

  <!-- –î—Ä—É–≥–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ç–æ–≥–æ –∂–µ –±—Ä–µ–Ω–¥–∞ -->
  <div style="flex: 1; background-color: #f8f9fa; padding: 15px; border-radius: 8px;">
    <h4>–î—Ä—É–≥–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –±—Ä–µ–Ω–¥–∞ "<span th:text="${product.brand.name}"></span>":</h4>
    <a th:href="@{/admin/product/list(brand=${product.brand.id})}"
       style="color: #007bff; text-decoration: none;">
      –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —ç—Ç–æ–≥–æ –±—Ä–µ–Ω–¥–∞ ‚Üí
    </a>
  </div>
</div>

<!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
<div style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px; background-color: #f8f9fa; padding: 10px; border-radius: 8px;">
  <h4>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>
  <div style="font-size: 12px; color: #666;">
    <p><strong>ID –ø—Ä–æ–¥—É–∫—Ç–∞:</strong> <span th:text="${product.id}"></span></p>
    <p><strong>ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</strong> <span th:text="${product.category.id}"></span></p>
    <p><strong>ID –±—Ä–µ–Ω–¥–∞:</strong> <span th:text="${product.brand.id}"></span></p>
    <p th:if="${product.imageUrl != null}"><strong>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</strong> <span th:text="${product.imageUrl}"></span></p>
    <p th:if="${product.createdAt != null}"><strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> <span th:text="${#temporals.format(product.createdAt, 'dd.MM.yyyy HH:mm')}"></span></p>
    <p th:if="${product.updatedAt != null}"><strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> <span th:text="${#temporals.format(product.updatedAt, 'dd.MM.yyyy HH:mm')}"></span></p>
  </div>
</div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<div style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px;">
  <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è:</h3>
  <ul>
    <li><a th:href="@{/admin/product/list}">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</a></li>
    <li><a th:href="@{/admin/product}">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç</a></li>
    <li><a th:href="@{/admin/product/statistics}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</a></li>
    <li><a th:href="@{/admin/category/list}">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</a></li>
    <li><a th:href="@{/admin/brand/list}">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞–º–∏</a></li>
  </ul>
</div>
</body>
</html>