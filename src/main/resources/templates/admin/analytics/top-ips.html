<!--<!DOCTYPE html>-->
<!--<html lang="uk" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>–¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤ - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</title>-->
<!--</head>-->
<!--<body>-->

<!--<h1>–¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤</h1>-->

<!--&lt;!&ndash; –ù–∞–≤–∏–≥–∞—Ü–∏—è &ndash;&gt;-->
<!--<p>-->
<!--  <a href="/analytics">‚Üê –ù–∞–∑–∞–¥ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</a> |-->
<!--  <a href="/analytics/countries">–°—Ç—Ä–∞–Ω—ã</a> |-->
<!--  <a href="/analytics/ip">–ü–æ–∏—Å–∫ –ø–æ IP</a>-->
<!--</p>-->

<!--<hr>-->

<!--&lt;!&ndash; –°–µ–ª–µ–∫—Ç–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ &ndash;&gt;-->
<!--<h2>–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞</h2>-->
<!--<p>-->
<!--  <strong>–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞:</strong>-->
<!--  <a th:href="@{/analytics/top-ips(days=1)}"-->
<!--     th:style="${selectedDays == 1} ? 'font-weight: bold; color: blue;' : ''">1 –¥–µ–Ω—å</a> |-->
<!--  <a th:href="@{/analytics/top-ips(days=7)}"-->
<!--     th:style="${selectedDays == 7} ? 'font-weight: bold; color: blue;' : ''">7 –¥–Ω–µ–π</a> |-->
<!--  <a th:href="@{/analytics/top-ips(days=30)}"-->
<!--     th:style="${selectedDays == 30} ? 'font-weight: bold; color: blue;' : ''">30 –¥–Ω–µ–π</a> |-->
<!--  <a th:href="@{/analytics/top-ips(days=90)}"-->
<!--     th:style="${selectedDays == 90} ? 'font-weight: bold; color: blue;' : ''">90 –¥–Ω–µ–π</a>-->
<!--</p>-->

<!--<hr>-->

<!--&lt;!&ndash; –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ &ndash;&gt;-->
<!--<h2>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ <span th:text="${selectedDays}">7</span> –¥–Ω–µ–π</h2>-->
<!--<table border="1" cellpadding="5">-->
<!--  <tr>-->
<!--    <td><strong>–í—Å–µ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏–π:</strong></td>-->
<!--    <td th:text="${totalVisits}">123</td>-->
<!--  </tr>-->
<!--  <tr>-->
<!--    <td><strong>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö IP:</strong></td>-->
<!--    <td th:text="${uniqueIps}">45</td>-->
<!--  </tr>-->
<!--  <tr>-->
<!--    <td><strong>–°—Ä–µ–¥–Ω–µ–µ –ø–æ—Å–µ—â–µ–Ω–∏–π –Ω–∞ IP:</strong></td>-->
<!--    <td th:text="${uniqueIps > 0 ? #numbers.formatDecimal(totalVisits / uniqueIps, 1, 1) : 0}">2.7</td>-->
<!--  </tr>-->
<!--</table>-->

<!--<hr>-->

<!--&lt;!&ndash; –¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤ &ndash;&gt;-->
<!--<h2>–¢–æ–ø 50 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤</h2>-->

<!--<div th:if="${topIps != null and !topIps.isEmpty()}">-->
<!--  <p><strong>–ù–∞–π–¥–µ–Ω–æ IP –∞–¥—Ä–µ—Å–æ–≤:</strong> <span th:text="${#lists.size(topIps)}">25</span></p>-->

<!--  <table border="1" cellpadding="5" width="100%">-->
<!--    <thead>-->
<!--    <tr>-->
<!--      <th>–ú–µ—Å—Ç–æ</th>-->
<!--      <th>IP –ê–¥—Ä–µ—Å</th>-->
<!--      <th>–ü–æ—Å–µ—â–µ–Ω–∏–π</th>-->
<!--      <th>% –æ—Ç –æ–±—â–µ–≥–æ</th>-->
<!--      <th>–°—Ç—Ä–∞–Ω–∞</th>-->
<!--      <th>–ì–æ—Ä–æ–¥</th>-->
<!--      <th>–î–µ–π—Å—Ç–≤–∏—è</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    <tr th:each="ip, ipStat : ${topIps}">-->
<!--      <td>-->
<!--        <strong th:text="${ipStat.count}">1</strong>-->
<!--      </td>-->
<!--      <td>-->
<!--        <code th:text="${ip[0]}">192.168.1.1</code>-->
<!--      </td>-->
<!--      <td>-->
<!--        <strong th:text="${ip[1]}">25</strong>-->
<!--      </td>-->
<!--      <td>-->
<!--        <span th:text="${#numbers.formatDecimal((ip[1] * 100.0 / totalVisits), 1, 1)} + '%'">15.5%</span>-->
<!--      </td>-->
<!--      <td>-->
<!--        <span th:text="${ip[2] ?: 'Unknown'}">Ukraine</span>-->
<!--      </td>-->
<!--      <td>-->
<!--        <span th:text="${ip[3] ?: 'Unknown'}">Kyiv</span>-->
<!--      </td>-->
<!--      <td>-->
<!--        <a th:href="@{/analytics/ip(ip=${ip[0]})}">üìä –î–µ—Ç–∞–ª–∏</a>-->
<!--      </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--  </table>-->

<!--  <hr>-->

<!--  &lt;!&ndash; –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ &ndash;&gt;-->
<!--  <h3>–ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ IP</h3>-->
<!--  <table border="1" cellpadding="5">-->
<!--    <tr>-->
<!--      <td><strong>–°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π IP:</strong></td>-->
<!--      <td>-->
<!--        <code th:text="${topIps[0][0]}">192.168.1.1</code>-->
<!--        (<span th:text="${topIps[0][1]}">50</span> –ø–æ—Å–µ—â–µ–Ω–∏–π)-->
<!--      </td>-->
<!--    </tr>-->
<!--    <tr>-->
<!--      <td><strong>IP —Å 1 –ø–æ—Å–µ—â–µ–Ω–∏–µ–º:</strong></td>-->
<!--      <td>-->
<!--        <span th:text="${#lists.size(#lists.select(topIps, ip -> ip[1] == 1))}">12</span>-->
<!--        (<span th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[1] == 1)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">24%</span>)-->
<!--      </td>-->
<!--    </tr>-->
<!--    <tr>-->
<!--      <td><strong>IP —Å 5+ –ø–æ—Å–µ—â–µ–Ω–∏—è–º–∏:</strong></td>-->
<!--      <td>-->
<!--        <span th:text="${#lists.size(#lists.select(topIps, ip -> ip[1] >= 5))}">8</span>-->
<!--        (<span th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[1] >= 5)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">16%</span>)-->
<!--      </td>-->
<!--    </tr>-->
<!--  </table>-->

<!--  <hr>-->

<!--  &lt;!&ndash; –¢–æ–ø —Å—Ç—Ä–∞–Ω—ã –ø–æ IP &ndash;&gt;-->
<!--  <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º (—Ç–æ–ø IP)</h3>-->
<!--  <table border="1" cellpadding="5">-->
<!--    <thead>-->
<!--    <tr>-->
<!--      <th>–°—Ç—Ä–∞–Ω–∞</th>-->
<!--      <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ IP</th>-->
<!--      <th>% –æ—Ç —Ç–æ–ø–∞</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    &lt;!&ndash; –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ —Å—Ç—Ä–∞–Ω–∞–º &ndash;&gt;-->
<!--    <tr th:each="country : ${#lists.toSet(#lists.select(topIps, ip -> ip[2]))}">-->
<!--      <td th:text="${country ?: 'Unknown'}">Ukraine</td>-->
<!--      <td th:text="${#lists.size(#lists.select(topIps, ip -> ip[2] == country))}">15</td>-->
<!--      <td th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[2] == country)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">60%</td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--  </table>-->

<!--</div>-->

<!--&lt;!&ndash; –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö &ndash;&gt;-->
<!--<div th:if="${topIps == null or topIps.isEmpty()}">-->
<!--  <h3 style="color: orange;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</h3>-->
<!--  <p>–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ <span th:text="${selectedDays}">7</span> –¥–Ω–µ–π –Ω–µ –±—ã–ª–æ –ø–æ—Å–µ—â–µ–Ω–∏–π.</p>-->
<!--  <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –±–æ–ª—å—à–∏–π –ø–µ—Ä–∏–æ–¥ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞.</p>-->
<!--</div>-->

<!--&lt;!&ndash; –û—à–∏–±–∫–∏ &ndash;&gt;-->
<!--<div th:if="${error}" style="color: red; border: 1px solid red; padding: 10px; margin: 10px 0;">-->
<!--  <h3>–û—à–∏–±–∫–∞</h3>-->
<!--  <p th:text="${error}">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</p>-->
<!--</div>-->

<!--<hr>-->

<!--&lt;!&ndash; –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è &ndash;&gt;-->
<!--<h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>-->
<!--<ul>-->
<!--  <li>-->
<!--    <a href="/analytics/ip">üîç –ù–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP</a>-->
<!--  </li>-->
<!--  <li>-->
<!--    <a th:href="@{/analytics/ip(ip=${topIps != null and !topIps.isEmpty() ? topIps[0][0] : ''})}">-->
<!--      üìä –ü–æ–¥—Ä–æ–±–Ω–æ –æ —Å–∞–º–æ–º –∞–∫—Ç–∏–≤–Ω–æ–º IP-->
<!--    </a>-->
<!--  </li>-->
<!--  <li>-->
<!--    <a href="/analytics/countries">üåç –ê–Ω–∞–ª–∏–∑ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º</a>-->
<!--  </li>-->
<!--  <li>-->
<!--    <a href="/analytics">üìà –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</a>-->
<!--  </li>-->
<!--</ul>-->

<!--<hr>-->

<!--&lt;!&ndash; –ü–æ—è—Å–Ω–µ–Ω–∏—è &ndash;&gt;-->
<!--<h3>–ü–æ—è—Å–Ω–µ–Ω–∏—è</h3>-->
<!--<ul>-->
<!--  <li><strong>IP –∞–¥—Ä–µ—Å</strong> - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ</li>-->
<!--  <li><strong>–ü–æ—Å–µ—â–µ–Ω–∏—è</strong> - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å–µ—Ç–∏–ª –¥–∞–Ω–Ω—ã–π IP</li>-->
<!--  <li><strong>% –æ—Ç –æ–±—â–µ–≥–æ</strong> - –¥–æ–ª—è –æ—Ç –≤—Å–µ—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥</li>-->
<!--  <li><strong>–î–µ—Ç–∞–ª–∏</strong> - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å–µ—Ö –ø–æ—Å–µ—â–µ–Ω–∏—è—Ö IP</li>-->
<!--</ul>-->

<!--<hr>-->

<!--<p>-->
<!--  <small>-->
<!--    <a href="/analytics">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</a>-->
<!--  </small>-->
<!--</p>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤ - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles -->
  <style>
    .period-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .period-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    .period-card.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    }
    .ip-card {
      transition: transform 0.2s, box-shadow 0.2s;
      border-left: 4px solid transparent;
    }
    .ip-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-left-color: #007bff;
    }
    .top-ip-card {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      border: 2px solid #FFD700;
    }
    .top-ip-card .ip-address {
      font-family: 'Courier New', monospace;
      font-weight: bold;
      color: #8B4513;
    }
    .stats-header {
      background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
      color: white;
      border-radius: 15px 15px 0 0;
    }
    .ip-address {
      font-family: 'Courier New', monospace;
      background: #f8f9fa;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      border: 1px solid #dee2e6;
    }
    .activity-badge {
      font-size: 0.8rem;
      padding: 0.3rem 0.6rem;
    }
    .country-card {
      background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
      color: white;
      border-radius: 10px;
    }
    .analysis-card {
      background: linear-gradient(135deg, #00cec9 0%, #55a3ff 100%);
      color: white;
      border-radius: 15px;
    }
    @media (max-width: 576px) {
      .ip-address {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body class="bg-light">

<div class="container-fluid py-3">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-6">üë• –¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤</h1>
        <a href="/analytics" class="btn btn-outline-primary">‚Üê –ù–∞–∑–∞–¥ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</a>
      </div>

      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
      <nav class="navbar navbar-expand-lg navbar-light bg-white rounded shadow-sm mb-4">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
              <li class="nav-item">
                <a class="nav-link" href="/analytics">üè† –ì–ª–∞–≤–Ω–∞—è</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/analytics/countries">üåç –°—Ç—Ä–∞–Ω—ã</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/analytics/ip">üîç –ü–æ–∏—Å–∫ –ø–æ IP</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/analytics/visitors">üìÑ –í—Å–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">üìÖ –ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-6 col-md-3">
              <a th:href="@{/analytics/top-ips(days=1)}" class="text-decoration-none">
                <div th:class="${selectedDays == 1} ? 'card period-card active h-100' : 'card period-card h-100'">
                  <div class="card-body text-center">
                    <h6 class="card-title">1 –¥–µ–Ω—å</h6>
                    <small>–°–µ–≥–æ–¥–Ω—è</small>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a th:href="@{/analytics/top-ips(days=7)}" class="text-decoration-none">
                <div th:class="${selectedDays == 7} ? 'card period-card active h-100' : 'card period-card h-100'">
                  <div class="card-body text-center">
                    <h6 class="card-title">7 –¥–Ω–µ–π</h6>
                    <small>–ù–µ–¥–µ–ª—è</small>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a th:href="@{/analytics/top-ips(days=30)}" class="text-decoration-none">
                <div th:class="${selectedDays == 30} ? 'card period-card active h-100' : 'card period-card h-100'">
                  <div class="card-body text-center">
                    <h6 class="card-title">30 –¥–Ω–µ–π</h6>
                    <small>–ú–µ—Å—è—Ü</small>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a th:href="@{/analytics/top-ips(days=90)}" class="text-decoration-none">
                <div th:class="${selectedDays == 90} ? 'card period-card active h-100' : 'card period-card h-100'">
                  <div class="card-body text-center">
                    <h6 class="card-title">90 –¥–Ω–µ–π</h6>
                    <small>–ö–≤–∞—Ä—Ç–∞–ª</small>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="card mb-4">
        <div class="card-header stats-header">
          <h5 class="card-title text-white mb-0">üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ <span th:text="${selectedDays}">7</span> –¥–Ω–µ–π</h5>
        </div>
        <div class="card-body">
          <div class="row g-3 text-center">
            <div class="col-12 col-md-4">
              <div class="h3 text-primary mb-0" th:text="${totalVisits}">123</div>
              <small class="text-muted">–í—Å–µ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏–π</small>
            </div>
            <div class="col-12 col-md-4">
              <div class="h3 text-success mb-0" th:text="${uniqueIps}">45</div>
              <small class="text-muted">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö IP</small>
            </div>
            <div class="col-12 col-md-4">
              <div class="h3 text-info mb-0" th:text="${uniqueIps > 0 ? #numbers.formatDecimal(totalVisits / uniqueIps, 1, 1) : 0}">2.7</div>
              <small class="text-muted">–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ IP</small>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–ª–∏ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö -->
      <div th:if="${topIps != null and !topIps.isEmpty()}">

        <!-- –¢–æ–ø 3 IP -->
        <div th:if="${#lists.size(topIps) >= 3}" class="mb-4">
          <h3 class="mb-3">üèÜ –¢–æ–ø 3 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö IP</h3>
          <div class="row g-3">
            <div th:each="ip, ipStat : ${topIps}" th:if="${ipStat.count <= 3}" class="col-12 col-lg-4">
              <div class="card top-ip-card ip-card h-100">
                <div class="card-body text-center">
                  <div class="mb-2">
                    <span th:if="${ipStat.count == 1}" class="h1">ü•á</span>
                    <span th:if="${ipStat.count == 2}" class="h1">ü•à</span>
                    <span th:if="${ipStat.count == 3}" class="h1">ü•â</span>
                  </div>
                  <div class="ip-address mb-3" th:text="${ip[0]}">192.168.1.1</div>
                  <div class="h4 text-dark mb-2" th:text="${ip[1]}">25</div>
                  <div class="h6 text-secondary mb-2" th:text="${#numbers.formatDecimal((ip[1] * 100.0 / totalVisits), 1, 1)} + '%'">15.5%</div>
                  <div class="small">
                    <div th:text="${ip[2] ?: 'Unknown'}">Ukraine</div>
                    <div class="text-muted" th:text="${ip[3] ?: 'Unknown'}">Kyiv</div>
                  </div>
                </div>
                <div class="card-footer">
                  <a th:href="@{/analytics/ip(ip=${ip[0]})}" class="btn btn-outline-dark btn-sm w-100">üìä –î–µ—Ç–∞–ª–∏</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ IP -->
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">üìã –¢–æ–ø 50 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤</h5>
            <small class="text-muted">–ù–∞–π–¥–µ–Ω–æ IP –∞–¥—Ä–µ—Å–æ–≤: <span th:text="${#lists.size(topIps)}">25</span></small>
          </div>
          <div class="card-body">

            <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–∫–∞—Ä—Ç–æ—á–∫–∏) -->
            <div class="d-block d-lg-none">
              <div class="row g-3">
                <div th:each="ip, ipStat : ${topIps}" class="col-12 col-md-6">
                  <div class="card ip-card h-100">
                    <div class="card-body">
                      <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="badge bg-secondary" th:text="${ipStat.count}">1</span>
                        <span class="badge bg-primary activity-badge" th:text="${ip[1]}">25</span>
                      </div>
                      <div class="ip-address mb-3 text-center" th:text="${ip[0]}">192.168.1.1</div>
                      <div class="row text-center">
                        <div class="col-6">
                          <div class="h6 text-success mb-0" th:text="${#numbers.formatDecimal((ip[1] * 100.0 / totalVisits), 1, 1)} + '%'">15.5%</div>
                          <small class="text-muted">% –æ—Ç –æ–±—â–µ–≥–æ</small>
                        </div>
                        <div class="col-6">
                          <div class="h6 text-info mb-0" th:text="${ip[2] ?: 'Unknown'}">Ukraine</div>
                          <small class="text-muted" th:text="${ip[3] ?: 'Unknown'}">Kyiv</small>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <a th:href="@{/analytics/ip(ip=${ip[0]})}" class="btn btn-outline-primary btn-sm w-100">üìä –î–µ—Ç–∞–ª–∏</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è (—Ç–∞–±–ª–∏—Ü–∞) -->
            <div class="d-none d-lg-block">
              <div class="table-responsive">
                <table class="table table-hover">
                  <thead class="table-dark">
                  <tr>
                    <th>–ú–µ—Å—Ç–æ</th>
                    <th>IP –ê–¥—Ä–µ—Å</th>
                    <th>–ü–æ—Å–µ—â–µ–Ω–∏–π</th>
                    <th>% –æ—Ç –æ–±—â–µ–≥–æ</th>
                    <th>–°—Ç—Ä–∞–Ω–∞</th>
                    <th>–ì–æ—Ä–æ–¥</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr th:each="ip, ipStat : ${topIps}">
                    <td>
                      <span class="badge bg-secondary" th:text="${ipStat.count}">1</span>
                    </td>
                    <td>
                      <code th:text="${ip[0]}">192.168.1.1</code>
                    </td>
                    <td>
                      <strong th:text="${ip[1]}">25</strong>
                    </td>
                    <td>
                      <span th:text="${#numbers.formatDecimal((ip[1] * 100.0 / totalVisits), 1, 1)} + '%'">15.5%</span>
                    </td>
                    <td>
                      <span th:text="${ip[2] ?: 'Unknown'}">Ukraine</span>
                    </td>
                    <td>
                      <span th:text="${ip[3] ?: 'Unknown'}">Kyiv</span>
                    </td>
                    <td>
                      <a th:href="@{/analytics/ip(ip=${ip[0]})}" class="btn btn-outline-primary btn-sm">üìä –î–µ—Ç–∞–ª–∏</a>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ IP -->
        <div class="card analysis-card mb-4">
          <div class="card-header">
            <h5 class="card-title text-white mb-0">üìà –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ IP</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-12 col-md-4">
                <div class="text-center">
                  <h6 class="text-white">–°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π IP:</h6>
                  <code class="bg-light text-dark p-2 rounded" th:text="${topIps[0][0]}">192.168.1.1</code>
                  <br><small class="text-white-50">(<span th:text="${topIps[0][1]}">50</span> –ø–æ—Å–µ—â–µ–Ω–∏–π)</small>
                </div>
              </div>
              <div class="col-12 col-md-4">
                <div class="text-center">
                  <h6 class="text-white">IP —Å 1 –ø–æ—Å–µ—â–µ–Ω–∏–µ–º:</h6>
                  <div class="h4 text-white" th:text="${#lists.size(#lists.select(topIps, ip -> ip[1] == 1))}">12</div>
                  <small class="text-white-50">(<span th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[1] == 1)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">24%</span>)</small>
                </div>
              </div>
              <div class="col-12 col-md-4">
                <div class="text-center">
                  <h6 class="text-white">IP —Å 5+ –ø–æ—Å–µ—â–µ–Ω–∏—è–º–∏:</h6>
                  <div class="h4 text-white" th:text="${#lists.size(#lists.select(topIps, ip -> ip[1] >= 5))}">8</div>
                  <small class="text-white-50">(<span th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[1] >= 5)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">16%</span>)</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º -->
        <div class="card mb-4">
          <div class="card-header bg-info text-white">
            <h5 class="card-title mb-0">üåç –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º (—Ç–æ–ø IP)</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div th:each="country : ${#lists.toSet(#lists.select(topIps, ip -> ip[2]))}" class="col-12 col-md-6 col-lg-4">
                <div class="country-card p-3 text-center">
                  <h6 class="text-white mb-2" th:text="${country ?: 'Unknown'}">Ukraine</h6>
                  <div class="h4 text-white mb-1" th:text="${#lists.size(#lists.select(topIps, ip -> ip[2] == country))}">15</div>
                  <small class="text-white-50">IP –∞–¥—Ä–µ—Å–æ–≤</small>
                  <div class="mt-2">
                    <span class="badge bg-light text-dark" th:text="${#numbers.formatDecimal((#lists.size(#lists.select(topIps, ip -> ip[2] == country)) * 100.0 / #lists.size(topIps)), 1, 1)} + '%'">60%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö -->
      <div th:if="${topIps == null or topIps.isEmpty()}" class="text-center my-5">
        <div class="card border-warning">
          <div class="card-body">
            <h3 class="text-warning">üö´ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</h3>
            <p class="text-muted">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ <span th:text="${selectedDays}">7</span> –¥–Ω–µ–π –Ω–µ –±—ã–ª–æ –ø–æ—Å–µ—â–µ–Ω–∏–π.</p>
            <p class="text-muted">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –±–æ–ª—å—à–∏–π –ø–µ—Ä–∏–æ–¥ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞.</p>
            <a href="/analytics/top-ips?days=30" class="btn btn-warning me-2">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 30 –¥–Ω–µ–π</a>
            <a href="/analytics" class="btn btn-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</a>
          </div>
        </div>
      </div>

      <!-- –û—à–∏–±–∫–∏ -->
      <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <h5 class="alert-heading">‚ùå –û—à–∏–±–∫–∞</h5>
        <p th:text="${error}" class="mb-0">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</p>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>

      <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
        </div>
        <div class="card-body">
          <div class="row g-2">
            <div class="col-6 col-md-3">
              <a href="/analytics/ip" class="btn btn-outline-info w-100">
                <small>üîç –ù–∞–π—Ç–∏ IP</small>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a th:href="@{/analytics/ip(ip=${topIps != null and !topIps.isEmpty() ? topIps[0][0] : ''})}"
                 class="btn btn-outline-success w-100" th:if="${topIps != null and !topIps.isEmpty()}">
                <small>üìä –¢–æ–ø IP</small>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a href="/analytics/countries" class="btn btn-outline-warning w-100">
                <small>üåç –ü–æ —Å—Ç—Ä–∞–Ω–∞–º</small>
              </a>
            </div>
            <div class="col-6 col-md-3">
              <a href="/analytics" class="btn btn-outline-primary w-100">
                <small>üìà –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</small>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- –ü–æ—è—Å–Ω–µ–Ω–∏—è -->
      <div class="card mb-4" style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white;">
        <div class="card-header bg-transparent border-0">
          <h5 class="card-title text-white mb-0">‚ÑπÔ∏è –ü–æ—è—Å–Ω–µ–Ω–∏—è</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><strong>IP –∞–¥—Ä–µ—Å</strong> - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ</li>
                <li class="mb-2"><strong>–ü–æ—Å–µ—â–µ–Ω–∏—è</strong> - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å–µ—Ç–∏–ª –¥–∞–Ω–Ω—ã–π IP</li>
              </ul>
            </div>
            <div class="col-12 col-md-6">
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><strong>% –æ—Ç –æ–±—â–µ–≥–æ</strong> - –¥–æ–ª—è –æ—Ç –≤—Å–µ—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥</li>
                <li class="mb-2"><strong>–î–µ—Ç–∞–ª–∏</strong> - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å–µ—Ö –ø–æ—Å–µ—â–µ–Ω–∏—è—Ö IP</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- –ù–∞–∑–∞–¥ -->
      <div class="text-center">
        <a href="/analytics" class="btn btn-outline-primary">
          ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

</body>
</html>