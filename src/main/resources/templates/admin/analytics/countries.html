<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ะะฝะฐะปะธัะธะบะฐ ะฟะพ ัััะฐะฝะฐะผ - ะะฝะฐะปะธัะธะบะฐ</title>
</head>
<body>

<h1>ะะฝะฐะปะธัะธะบะฐ ะฟะพ ัััะฐะฝะฐะผ</h1>

<!-- ะะฐะฒะธะณะฐัะธั -->
<p>
    <a href="/analytics">โ ะะฐะทะฐะด ะบ ะฐะฝะฐะปะธัะธะบะต</a> |
    <a href="/analytics/ip">ะะพะธัะบ ะฟะพ IP</a> |
    <a href="/analytics/top-ips">ะขะพะฟ IP</a> |
    <a href="/analytics/visitors">ะัะต ะฟะพัะตัะธัะตะปะธ</a>
</p>

<hr>

<!-- ะกะตะปะตะบัะพั ะฟะตัะธะพะดะฐ -->
<h2>ะะตัะธะพะด ะฐะฝะฐะปะธะทะฐ</h2>
<p>
    <strong>ะะพะบะฐะทะฐัั ะดะฐะฝะฝัะต ะทะฐ:</strong>
    <a th:href="@{/analytics/countries(days=1)}"
       th:style="${selectedDays == 1} ? 'font-weight: bold; color: blue;' : ''">1 ะดะตะฝั</a> |
    <a th:href="@{/analytics/countries(days=7)}"
       th:style="${selectedDays == 7} ? 'font-weight: bold; color: blue;' : ''">7 ะดะฝะตะน</a> |
    <a th:href="@{/analytics/countries(days=30)}"
       th:style="${selectedDays == 30} ? 'font-weight: bold; color: blue;' : ''">30 ะดะฝะตะน</a> |
    <a th:href="@{/analytics/countries(days=90)}"
       th:style="${selectedDays == 90} ? 'font-weight: bold; color: blue;' : ''">90 ะดะฝะตะน</a>
</p>

<hr>

<!-- ะะฑัะฐั ััะฐัะธััะธะบะฐ -->
<h2>ะะฑัะฐั ััะฐัะธััะธะบะฐ ะทะฐ <span th:text="${selectedDays}">7</span> ะดะฝะตะน</h2>
<table border="1" cellpadding="5">
    <tr>
        <td><strong>ะัะตะณะพ ะฟะพัะตัะตะฝะธะน:</strong></td>
        <td th:text="${totalVisits}">123</td>
    </tr>
    <tr>
        <td><strong>ะฃะฝะธะบะฐะปัะฝัั ัััะฐะฝ:</strong></td>
        <td th:text="${#lists.size(countriesStats)}">8</td>
    </tr>
    <tr>
        <td><strong>ะกัะตะดะฝะตะต ะฟะพัะตัะตะฝะธะน ะฝะฐ ัััะฐะฝั:</strong></td>
        <td th:text="${#lists.size(countriesStats) > 0 ? #numbers.formatDecimal(totalVisits / #lists.size(countriesStats), 1, 1) : 0}">15.4</td>
    </tr>
</table>

<hr>

<!-- ะกัะฐัะธััะธะบะฐ ะฟะพ ัััะฐะฝะฐะผ -->
<h2>ะะตัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ ะฟะพ ัััะฐะฝะฐะผ</h2>

<div th:if="${countriesStats != null and !countriesStats.isEmpty()}">
    <p><strong>ะะฐะนะดะตะฝะพ ัััะฐะฝ:</strong> <span th:text="${#lists.size(countriesStats)}">8</span></p>

    <!-- ะขะพะฟ 3 ัััะฐะฝั - ะฒัะดะตะปะตะฝะฝะพ -->
    <h3>๐ ะขะพะฟ 3 ัััะฐะฝั</h3>
    <table border="2" cellpadding="10" width="100%" th:if="${#lists.size(countriesStats) >= 3}">
        <thead>
        <tr style="background-color: #f0f0f0;">
            <th>๐ฅ๐ฅ๐ฅ ะะตััะพ</th>
            <th>๐ ะกััะฐะฝะฐ</th>
            <th>๐ ะะพัะตัะตะฝะธะน</th>
            <th>๐ % ะพั ะพะฑัะตะณะพ</th>
            <th>๐ ะะตะนััะฒะธั</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="country, countryStat : ${countriesStats}" th:if="${countryStat.count <= 3}">
            <td style="text-align: center;">
                <strong>
                    <span th:if="${countryStat.count == 1}">๐ฅ 1</span>
                    <span th:if="${countryStat.count == 2}">๐ฅ 2</span>
                    <span th:if="${countryStat.count == 3}">๐ฅ 3</span>
                </strong>
            </td>
            <td>
                <strong th:text="${country[0] ?: 'ะะตะฒัะดะพะผะฐ ะบัะฐัะฝะฐ'}">Ukraine</strong>
                <br>
                <small style="color: gray;">
                            <span th:switch="${country[0]}">
                                <span th:case="'Ukraine'">๐บ๐ฆ</span>
                                <span th:case="'Poland'">๐ต๐ฑ</span>
                                <span th:case="'Germany'">๐ฉ๐ช</span>
                                <span th:case="'United States'">๐บ๐ธ</span>
                                <span th:case="'Canada'">๐จ๐ฆ</span>
                                <span th:case="'France'">๐ซ๐ท</span>
                                <span th:case="'United Kingdom'">๐ฌ๐ง</span>
                                <span th:case="'Italy'">๐ฎ๐น</span>
                                <span th:case="'Spain'">๐ช๐ธ</span>
                                <span th:case="'Netherlands'">๐ณ๐ฑ</span>
                                <span th:case="*">๐</span>
                            </span>
                </small>
            </td>
            <td style="text-align: center;">
                <strong style="font-size: 1.2em;" th:text="${country[1]}">150</strong>
            </td>
            <td style="text-align: center;">
                <strong th:text="${#numbers.formatDecimal((country[1] * 100.0 / totalVisits), 1, 1)} + '%'">60.5%</strong>
            </td>
            <td style="text-align: center;">
                <a href="#">๐ ะะตัะฐะปะธ</a>
            </td>
        </tr>
        </tbody>
    </table>

    <hr>

    <!-- ะะพะปะฝัะน ัะฟะธัะพะบ ัััะฐะฝ -->
    <h3>๐ ะะพะปะฝัะน ัะฟะธัะพะบ ะฒัะตั ัััะฐะฝ</h3>
    <table border="1" cellpadding="5" width="100%">
        <thead>
        <tr style="background-color: #f9f9f9;">
            <th width="10%">#</th>
            <th width="10%">ะคะปะฐะณ</th>
            <th width="30%">ะกััะฐะฝะฐ</th>
            <th width="20%">ะะพัะตัะตะฝะธะน</th>
            <th width="20%">% ะพั ะพะฑัะตะณะพ</th>
            <th width="10%">ะัะฐัะธะบ</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="country, countryStat : ${countriesStats}">
            <td style="text-align: center;">
                <strong th:text="${countryStat.count}">1</strong>
            </td>
            <td style="text-align: center; font-size: 1.5em;">
                        <span th:switch="${country[0]}">
                            <span th:case="'Ukraine'">๐บ๐ฆ</span>
                            <span th:case="'Poland'">๐ต๐ฑ</span>
                            <span th:case="'Germany'">๐ฉ๐ช</span>
                            <span th:case="'United States'">๐บ๐ธ</span>
                            <span th:case="'Canada'">๐จ๐ฆ</span>
                            <span th:case="'France'">๐ซ๐ท</span>
                            <span th:case="'United Kingdom'">๐ฌ๐ง</span>
                            <span th:case="'Italy'">๐ฎ๐น</span>
                            <span th:case="'Spain'">๐ช๐ธ</span>
                            <span th:case="'Netherlands'">๐ณ๐ฑ</span>
                            <span th:case="'Austria'">๐ฆ๐น</span>
                            <span th:case="'Belgium'">๐ง๐ช</span>
                            <span th:case="'Czech Republic'">๐จ๐ฟ</span>
                            <span th:case="'Denmark'">๐ฉ๐ฐ</span>
                            <span th:case="'Finland'">๐ซ๐ฎ</span>
                            <span th:case="'Norway'">๐ณ๐ด</span>
                            <span th:case="'Sweden'">๐ธ๐ช</span>
                            <span th:case="'Switzerland'">๐จ๐ญ</span>
                            <span th:case="*">๐</span>
                        </span>
            </td>
            <td>
                <strong th:text="${country[0] ?: 'ะะตะฒัะดะพะผะฐ ะบัะฐัะฝะฐ'}">Ukraine</strong>
            </td>
            <td style="text-align: center;">
                <strong th:text="${country[1]}">150</strong>
            </td>
            <td style="text-align: center;">
                <span th:text="${#numbers.formatDecimal((country[1] * 100.0 / totalVisits), 1, 1)} + '%'">60.5%</span>
            </td>
            <td>
                <!-- ะัะพััะพะน ัะตะบััะพะฒัะน ะณัะฐัะธะบ -->
                <div style="background-color: #e0e0e0; width: 100%; height: 20px; position: relative;">
                    <div th:style="'background-color: #4CAF50; height: 20px; width: ' + ${country[1] * 100.0 / totalVisits} + '%;'"></div>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <hr>

    <!-- ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ -->
    <h3>๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ</h3>
    <table border="1" cellpadding="5">
        <tr>
            <td><strong>ะกะฐะผะฐั ะฐะบัะธะฒะฝะฐั ัััะฐะฝะฐ:</strong></td>
            <td>
                <strong th:text="${countriesStats[0][0]}">Ukraine</strong>
                (<span th:text="${countriesStats[0][1]}">150</span> ะฟะพัะตัะตะฝะธะน -
                <span th:text="${#numbers.formatDecimal((countriesStats[0][1] * 100.0 / totalVisits), 1, 1)} + '%'">60%</span>)
            </td>
        </tr>
        <tr>
            <td><strong>ะัะตะณะพ ัััะฐะฝ:</strong></td>
            <td>
                <span th:text="${#lists.size(countriesStats)}">8</span> ัััะฐะฝ
            </td>
        </tr>
        <tr>
            <td><strong>ะกัะตะดะฝะธะต ะฟะพัะตัะตะฝะธั ะฝะฐ ัััะฐะฝั:</strong></td>
            <td>
                <span th:text="${#numbers.formatDecimal(totalVisits / #lists.size(countriesStats), 1, 1)}">18.7</span> ะฟะพัะตัะตะฝะธะน
            </td>
        </tr>
        <tr>
            <td><strong>ะะพะผะธะฝะธัะพะฒะฐะฝะธะต ะปะธะดะตัะฐ:</strong></td>
            <td>
                <span th:text="${#numbers.formatDecimal((countriesStats[0][1] * 100.0 / totalVisits), 1, 1)} + '%'">60%</span>
                ะพั ะฒัะตั ะฟะพัะตัะตะฝะธะน
            </td>
        </tr>
    </table>

</div>

<!-- ะะตั ะดะฐะฝะฝัั -->
<div th:if="${countriesStats == null or countriesStats.isEmpty()}">
    <h3 style="color: orange;">๐ซ ะะตั ะดะฐะฝะฝัั ะฟะพ ัััะฐะฝะฐะผ</h3>
    <p>ะะฐ ะฒัะฑัะฐะฝะฝัะน ะฟะตัะธะพะด <strong th:text="${selectedDays}">7</strong> ะดะฝะตะน ะฝะต ะฑัะปะพ ะฟะพัะตัะตะฝะธะน ะธะท ะพะฟัะตะดะตะปะตะฝะฝัั ัััะฐะฝ.</p>
    <p>ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:</p>
    <ul>
        <li>ะะตัะธะพะด ัะปะธัะบะพะผ ะบะพัะพัะบะธะน</li>
        <li>ะัะพะฑะปะตะผั ั ะพะฟัะตะดะตะปะตะฝะธะตะผ ะณะตะพะปะพะบะฐัะธะธ</li>
        <li>ะกะธััะตะผะฐ ััะตะบะธะฝะณะฐ ะฑัะปะฐ ะพัะบะปััะตะฝะฐ</li>
    </ul>
    <p>
        <a href="/analytics/countries?days=30">ะะพะฟัะพะฑัะนัะต ะฟะตัะธะพะด 30 ะดะฝะตะน</a> |
        <a href="/analytics">ะะตัะฝััััั ะบ ะณะปะฐะฒะฝะพะน ะฐะฝะฐะปะธัะธะบะต</a>
    </p>
</div>

<!-- ะัะธะฑะบะธ -->
<div th:if="${error}" style="color: red; border: 2px solid red; padding: 15px; margin: 10px 0; background-color: #ffe6e6;">
    <h3>โ ะัะธะฑะบะฐ</h3>
    <p th:text="${error}">ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ ะทะฐะณััะทะบะธ</p>
    <p><a href="/analytics">โ ะะตัะฝััััั ะบ ะณะปะฐะฒะฝะพะน ะฐะฝะฐะปะธัะธะบะต</a></p>
</div>

<hr>

<!-- ะัััััะต ะดะตะนััะฒะธั -->
<h3>๐ ะัััััะต ะดะตะนััะฒะธั</h3>
<ul>
    <li>
        <a href="/analytics/ip">๐ ะะฐะนัะธ ะบะพะฝะบัะตัะฝัะน IP ะฐะดัะตั</a>
    </li>
    <li>
        <a href="/analytics/top-ips">๐ฅ ะะพัะผะพััะตัั ัะพะฟ IP ะฐะดัะตัะพะฒ</a>
    </li>
    <li>
        <a href="/analytics/visitors">๐ ะัะต ะฟะพัะตัะธัะตะปะธ</a>
    </li>
    <li>
        <a href="/analytics">๐ ะะฑัะฐั ะฐะฝะฐะปะธัะธะบะฐ</a>
    </li>
</ul>

<hr>

<!-- ะะพััะฝะตะฝะธั -->
<h3>โน๏ธ ะะพััะฝะตะฝะธั</h3>
<ul>
    <li><strong>ะกััะฐะฝะฐ</strong> - ะพะฟัะตะดะตะปัะตััั ะฟะพ IP ะฐะดัะตัั ะฟะพัะตัะธัะตะปั</li>
    <li><strong>ะะพัะตัะตะฝะธั</strong> - ะบะพะปะธัะตััะฒะพ ัััะฐะฝะธั, ะฟัะพัะผะพััะตะฝะฝัั ะธะท ะดะฐะฝะฝะพะน ัััะฐะฝั</li>
    <li><strong>% ะพั ะพะฑัะตะณะพ</strong> - ะดะพะปั ะฟะพัะตัะตะฝะธะน ะพั ะพะฑัะตะณะพ ะบะพะปะธัะตััะฒะฐ ะทะฐ ะฟะตัะธะพะด</li>
    <li><strong>ะัะฐัะธะบ</strong> - ะฒะธะทัะฐะปัะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะดะพะปะธ ัััะฐะฝั</li>
</ul>

<hr>

<p>
    <small>
        <a href="/analytics">โ ะะตัะฝััััั ะบ ะณะปะฐะฒะฝะพะน ะฐะฝะฐะปะธัะธะบะต</a>
    </small>
</p>

</body>
</html>