<!--<!DOCTYPE html>-->
<!--<html lang="uk" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Аналітика відвідувачів - Країна шоколаду</title>-->

<!--    &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">-->
<!--    &lt;!&ndash; Bootstrap Icons &ndash;&gt;-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">-->

<!--    <style>-->
<!--        .stat-card {-->
<!--            transition: transform 0.2s;-->
<!--            border-left: 4px solid #007bff;-->
<!--        }-->
<!--        .stat-card:hover {-->
<!--            transform: translateY(-2px);-->
<!--        }-->
<!--        .stat-number {-->
<!--            font-size: 2rem;-->
<!--            font-weight: bold;-->
<!--            color: #007bff;-->
<!--        }-->
<!--        .table-hover tbody tr:hover {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .badge-country {-->
<!--            background: linear-gradient(45deg, #007bff, #28a745);-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="bg-light">-->
<!--<div class="container-fluid py-4">-->

<!--    &lt;!&ndash; Заголовок &ndash;&gt;-->
<!--    <div class="row mb-4">-->
<!--        <div class="col">-->
<!--            <h1 class="h3 mb-0">-->
<!--                <i class="bi bi-graph-up-arrow text-primary me-2"></i>-->
<!--                Аналітика відвідувачів-->
<!--            </h1>-->
<!--            <p class="text-muted mb-0">Статистика відвідувань інтернет-магазину</p>-->
<!--        </div>-->

<!--    </div>-->

<!--    &lt;!&ndash; Основная статистика &ndash;&gt;-->
<!--    <div class="row mb-4">-->
<!--        &lt;!&ndash; Всего посещений &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-people-fill text-primary mb-2" style="font-size: 2.5rem;"></i>-->
<!--&lt;!&ndash;                    <div class="stat-number" th:text="${stats.totalVisits ?: 0}">1,234</div>&ndash;&gt;-->
<!--                    <h6 class="text-muted mb-0">Всього відвідувань</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; За неделю &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-calendar-week-fill text-success mb-2" style="font-size: 2.5rem;"></i>-->
<!--&lt;!&ndash;                    <div class="stat-number text-success" th:text="${stats.weeklyVisits ?: 0}">156</div>&ndash;&gt;-->
<!--                    <h6 class="text-muted mb-0">За тиждень</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Сегодня &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-calendar-day-fill text-info mb-2" style="font-size: 2.5rem;"></i>-->
<!--                    <div class="stat-number text-info" th:text="${todayVisits ?: 0}">23</div>-->
<!--                    <h6 class="text-muted mb-0">Сьогодні</h6>-->
<!--                    <small class="text-muted">Унікальних: <span th:text="${todayUnique ?: 0}">15</span></small>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Мобильные &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-phone-fill text-warning mb-2" style="font-size: 2.5rem;"></i>-->
<!--                    <div class="stat-number text-warning" th:text="${#numbers.formatDecimal(stats.mobilePercentage ?: 0, 1, 1)}">45.2</div>-->
<!--                    <h6 class="text-muted mb-0">% мобільних</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <div class="row">-->
<!--        &lt;!&ndash; Топ страны &ndash;&gt;-->
<!--        <div class="col-lg-6 mb-4">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-globe2 text-primary me-2"></i>-->
<!--                        Топ країни (тиждень)-->
<!--                    </h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div th:if="${topCountries != null and !topCountries.isEmpty()}">-->
<!--                        <div th:each="country, countryStat : ${topCountries}"-->
<!--                             class="d-flex justify-content-between align-items-center py-2 border-bottom">-->
<!--                            <div class="d-flex align-items-center">-->
<!--                                    <span class="me-3" style="font-size: 1.5rem;">-->
<!--                                        &lt;!&ndash; Простые эмодзи флагов &ndash;&gt;-->
<!--                                        <span th:switch="${country[0]}">-->
<!--                                            <span th:case="'Ukraine'">🇺🇦</span>-->
<!--                                            <span th:case="'Poland'">🇵🇱</span>-->
<!--                                            <span th:case="'Germany'">🇩🇪</span>-->
<!--                                            <span th:case="'United States'">🇺🇸</span>-->
<!--                                            <span th:case="'Canada'">🇨🇦</span>-->
<!--                                            <span th:case="*">🌍</span>-->
<!--                                        </span>-->
<!--                                    </span>-->
<!--                                <div>-->
<!--                                    <strong th:text="${country[0] ?: 'Невідомо'}">Ukraine</strong>-->
<!--                                    <br>-->
<!--                                    <small class="text-muted">-->
<!--                                        Позиція #<span th:text="${countryStat.count}">1</span>-->
<!--                                    </small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <span class="badge badge-country text-white fs-6" th:text="${country[1]} + ' відвідувань'">45 відвідувань</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${topCountries == null or topCountries.isEmpty()}"-->
<!--                         class="text-center py-4 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2"></i>-->
<!--                        Поки немає даних по країнах-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Топ страницы &ndash;&gt;-->
<!--        <div class="col-lg-6 mb-4">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-file-earmark-text text-primary me-2"></i>-->
<!--                        Популярні сторінки-->
<!--                    </h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div th:if="${topPages != null and !topPages.isEmpty()}">-->
<!--                        <div th:each="page, pageStat : ${topPages}"-->
<!--                             class="d-flex justify-content-between align-items-center py-2 border-bottom">-->
<!--                            <div class="flex-grow-1 me-3">-->
<!--                                <div class="text-truncate">-->
<!--                                    <i class="bi bi-link-45deg text-muted me-1"></i>-->
<!--                                    <code class="text-primary" th:text="${page[0] ?: '/'}"></code>-->
<!--                                </div>-->
<!--                                <small class="text-muted">-->
<!--                                    Позиція #<span th:text="${pageStat.count}">1</span>-->
<!--                                </small>-->
<!--                            </div>-->
<!--                            <span class="badge bg-secondary" th:text="${page[1]}">12</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${topPages == null or topPages.isEmpty()}"-->
<!--                         class="text-center py-4 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2"></i>-->
<!--                        Поки немає даних по сторінках-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Последние посетители &ndash;&gt;-->
<!--    <div class="row">-->
<!--        <div class="col-12">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white d-flex justify-content-between align-items-center">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-clock-history text-primary me-2"></i>-->
<!--                        Останні відвідувачі-->
<!--                    </h5>-->
<!--                    <span class="badge bg-info" th:text="${#lists.size(recentVisitors)} + ' записів'">20 записів</span>-->
<!--                </div>-->
<!--                <div class="card-body p-0">-->
<!--                    <div th:if="${recentVisitors != null and !recentVisitors.isEmpty()}">-->
<!--                        <div class="table-responsive">-->
<!--                            <table class="table table-hover mb-0">-->
<!--                                <thead class="table-light">-->
<!--                                <tr>-->
<!--                                    <th width="15%">-->
<!--                                        <i class="bi bi-clock me-1"></i>Час-->
<!--                                    </th>-->
<!--                                    <th width="15%">-->
<!--                                        <i class="bi bi-router me-1"></i>IP адреса-->
<!--                                    </th>-->
<!--                                    <th width="20%">-->
<!--                                        <i class="bi bi-geo-alt me-1"></i>Локація-->
<!--                                    </th>-->
<!--                                    <th width="20%">-->
<!--                                        <i class="bi bi-device-ssd me-1"></i>Пристрій-->
<!--                                    </th>-->
<!--                                    <th width="30%">-->
<!--                                        <i class="bi bi-link me-1"></i>Сторінка-->
<!--                                    </th>-->
<!--                                </tr>-->
<!--                                </thead>-->
<!--                                <tbody>-->
<!--                                <tr th:each="visitor : ${recentVisitors}">-->
<!--                                    &lt;!&ndash; Время &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div class="fw-bold" th:text="${#temporals.format(visitor.visitTime, 'HH:mm:ss')}">12:34:56</div>-->
<!--                                        <small class="text-muted" th:text="${#temporals.format(visitor.visitTime, 'dd.MM.yyyy')}">15.08.2024</small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; IP адрес &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <code class="text-primary" th:text="${visitor.ipAddress}">192.168.1.1</code>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; Локация &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div>-->
<!--                                            <strong th:text="${visitor.country ?: 'Невідомо'}">Ukraine</strong>-->
<!--                                            <span th:if="${visitor.isBot}" class="badge bg-warning ms-1">🤖 BOT</span>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted" th:text="${visitor.city ?: 'Місто невідоме'}">Kyiv</small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; Устройство &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div>-->
<!--                                            <span th:if="${visitor.isMobile}" class="badge bg-success">📱 Mobile</span>-->
<!--                                            <span th:unless="${visitor.isMobile}" class="badge bg-primary">💻 Desktop</span>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted">-->
<!--                                            <span th:text="${visitor.operatingSystem ?: 'Unknown OS'}">Windows</span>-->
<!--                                            <span th:if="${visitor.browserName}"> • <span th:text="${visitor.browserName}">Chrome</span></span>-->
<!--                                        </small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; Страница &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div class="text-truncate">-->
<!--                                            <code class="text-primary" th:text="${visitor.requestedUrl ?: '/'}"></code>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted" th:if="${visitor.refererUrl}">-->
<!--                                            від: <span th:text="${visitor.refererUrl}"></span>-->
<!--                                        </small>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${recentVisitors == null or recentVisitors.isEmpty()}"-->
<!--                         class="text-center py-5 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2" style="font-size: 2rem;"></i>-->
<!--                        <div class="mt-2">Поки немає відвідувачів</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Ошибки &ndash;&gt;-->
<!--    <div th:if="${error}" class="alert alert-danger mt-4">-->
<!--        <i class="bi bi-exclamation-triangle-fill me-2"></i>-->
<!--        <strong>Помилка:</strong> <span th:text="${error}">Ошибка загрузки данных</span>-->
<!--    </div>-->

<!--    &lt;!&ndash; Футер с обновлением &ndash;&gt;-->
<!--    <div class="row mt-5">-->
<!--        <div class="col text-center">-->
<!--            <small class="text-muted">-->
<!--                <i class="bi bi-arrow-clockwise me-1"></i>-->
<!--                Останнє оновлення: <span id="lastUpdate"></span>-->
<!--                <button class="btn btn-sm btn-outline-secondary ms-2" onclick="location.reload()">-->
<!--                    <i class="bi bi-arrow-clockwise"></i> Оновити-->
<!--                </button>-->
<!--            </small>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Bootstrap JS &ndash;&gt;-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--    // Показываем время последнего обновления-->
<!--    document.getElementById('lastUpdate').textContent = new Date().toLocaleString('uk-UA');-->

<!--    // Автообновление каждые 60 секунд-->
<!--    setInterval(function() {-->
<!--        location.reload();-->
<!--    }, 60000);-->

<!--    // Уведомление о загрузке-->
<!--    console.log('📊 Аналітика відвідувачів завантажена успішно');-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аналитика посетителей - Панель управления</title>
</head>
<body>

<h1>📊 Аналитика посетителей</h1>

<!-- Навигация -->
<p>
    <a href="/analytics/countries">🌍 Страны</a> |
    <a href="/analytics/ip">🔍 Поиск по IP</a> |
    <a href="/analytics/top-ips">👥 Топ IP</a> |
    <a href="/analytics/visitors">📄 Все посетители</a>
</p>

<hr>

<!-- Основная статистика -->
<h2>📈 Основная статистика</h2>
<table border="2" cellpadding="10" width="100%">
    <tr>
        <td style="text-align: center; background-color: #e3f2fd;">
            <h3>👥 Всего посещений</h3>
            <strong style="font-size: 2em; color: #1976d2;" th:text="${stats.totalVisits ?: 0}">1,234</strong>
            <br><small>За все время</small>
        </td>
        <td style="text-align: center; background-color: #e8f5e8;">
            <h3>📅 За неделю</h3>
            <strong style="font-size: 2em; color: #388e3c;" th:text="${stats.weeklyVisits ?: 0}">156</strong>
            <br><small>Последние 7 дней</small>
        </td>
        <td style="text-align: center; background-color: #fff3e0;">
            <h3>📱 Мобильных</h3>
            <strong style="font-size: 2em; color: #f57c00;" th:text="${#numbers.formatDecimal(stats.mobilePercentage ?: 0, 1, 1)} + '%'">45.2%</strong>
            <br><small>От всех посещений</small>
        </td>
        <td style="text-align: center; background-color: #f3e5f5;">
            <h3>🕐 Сегодня</h3>
            <strong style="font-size: 2em; color: #7b1fa2;" th:text="${todayVisits ?: 0}">23</strong>
            <br><small>Уникальных: <span th:text="${todayUnique ?: 0}">15</span></small>
        </td>
    </tr>
</table>

<hr>

<!-- Топ страны и страницы -->
<table width="100%">
    <tr>
        <td width="50%" valign="top">
            <!-- Топ страны -->
            <h3>🌍 Топ страны (неделя)</h3>
            <div th:if="${topCountries != null and !topCountries.isEmpty()}">
                <table border="1" cellpadding="5" width="100%">
                    <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th>Место</th>
                        <th>Страна</th>
                        <th>Посещений</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="country, countryStat : ${topCountries}">
                        <td style="text-align: center;">
                            <strong th:text="${countryStat.count}">1</strong>
                        </td>
                        <td>
                                    <span th:switch="${country[0]}">
                                        <span th:case="'Ukraine'">🇺🇦</span>
                                        <span th:case="'Poland'">🇵🇱</span>
                                        <span th:case="'Germany'">🇩🇪</span>
                                        <span th:case="'United States'">🇺🇸</span>
                                        <span th:case="'Canada'">🇨🇦</span>
                                        <span th:case="'France'">🇫🇷</span>
                                        <span th:case="*">🌍</span>
                                    </span>
                            <strong th:text="${country[0] ?: 'Невідомо'}">Ukraine</strong>
                        </td>
                        <td style="text-align: center;">
                            <strong th:text="${country[1]}">45</strong>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${topCountries == null or topCountries.isEmpty()}">
                <p style="color: gray; text-align: center;">Поки немає даних по країнах</p>
            </div>
            <p><a href="/analytics/countries">📊 Детальна статистика по країнах →</a></p>
        </td>

        <td width="50%" valign="top">
            <!-- Топ страницы -->
            <h3>📄 Популярні сторінки</h3>
            <div th:if="${topPages != null and !topPages.isEmpty()}">
                <table border="1" cellpadding="5" width="100%">
                    <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th>Место</th>
                        <th>Страница</th>
                        <th>Посещений</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="page, pageStat : ${topPages}">
                        <td style="text-align: center;">
                            <strong th:text="${pageStat.count}">1</strong>
                        </td>
                        <td>
                            <code style="font-size: 0.9em;" th:text="${page[0] ?: '/'}"></code>
                        </td>
                        <td style="text-align: center;">
                            <strong th:text="${page[1]}">12</strong>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${topPages == null or topPages.isEmpty()}">
                <p style="color: gray; text-align: center;">Поки немає даних по сторінках</p>
            </div>
        </td>
    </tr>
</table>

<hr>

<!-- Последние посетители -->
<h2>👥 Останні відвідувачі</h2>

<!-- Информация о пагинации -->
<p>
    <strong>Показано:</strong>
    <span th:text="${#lists.size(recentVisitors)}">20</span> записей
    (страница <span th:text="${currentPage + 1}">1</span> из <span th:text="${totalPages}">3</span>)
    | <strong>Всего записей в ограничении:</strong> <span th:text="${totalElements}">50</span>
    | <a href="/analytics/visitors">📄 Посмотреть все записи →</a>
</p>

<!-- Размер страницы -->
<p>
    <strong>Записей на странице:</strong>
    <a th:href="@{/analytics(page=0, size=10)}"
       th:style="${pageSize == 10} ? 'font-weight: bold; color: blue;' : ''">10</a> |
    <a th:href="@{/analytics(page=0, size=20)}"
       th:style="${pageSize == 20} ? 'font-weight: bold; color: blue;' : ''">20</a> |
    <a th:href="@{/analytics(page=0, size=50)}"
       th:style="${pageSize == 50} ? 'font-weight: bold; color: blue;' : ''">50</a>
</p>

<!-- Таблица посетителей -->
<div th:if="${recentVisitors != null and !recentVisitors.isEmpty()}">
    <table border="1" cellpadding="5" width="100%">
        <thead>
        <tr style="background-color: #f5f5f5;">
            <th width="15%">Время</th>
            <th width="15%">IP Адрес</th>
            <th width="20%">Локация</th>
            <th width="15%">Устройство</th>
            <th width="25%">Страница</th>
            <th width="10%">Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="visitor : ${recentVisitors}">
            <!-- Время -->
            <td>
                <strong th:text="${#temporals.format(visitor.visitTime, 'HH:mm:ss')}">12:34:56</strong>
                <br>
                <small th:text="${#temporals.format(visitor.visitTime, 'dd.MM.yyyy')}">15.08.2024</small>
            </td>

            <!-- IP адрес -->
            <td>
                <a th:href="@{/analytics/ip(ip=${visitor.ipAddress})}">
                    <code th:text="${visitor.ipAddress}">192.168.1.1</code>
                </a>
            </td>

            <!-- Локация -->
            <td>
                <strong th:text="${visitor.country ?: 'Невідомо'}">Ukraine</strong>
                <span th:if="${visitor.isBot}" style="color: red;">🤖</span>
                <br>
                <small th:text="${visitor.city ?: 'Місто невідоме'}">Kyiv</small>
            </td>

            <!-- Устройство -->
            <td>
                <span th:if="${visitor.isMobile}" style="color: green;">📱 Mobile</span>
                <span th:unless="${visitor.isMobile}" style="color: blue;">💻 Desktop</span>
                <br>
                <small th:text="${visitor.operatingSystem ?: 'Unknown'}">Windows</small>
            </td>

            <!-- Страница -->
            <td>
                <code style="font-size: 0.9em;" th:text="${visitor.requestedUrl ?: '/'}"></code>
                <div th:if="${visitor.refererUrl}" style="margin-top: 3px;">
                    <small style="color: gray;">
                        від: <span th:text="${visitor.refererUrl}"></span>
                    </small>
                </div>
            </td>

            <!-- Действия -->
            <td style="text-align: center;">
                <a th:href="@{/analytics/ip(ip=${visitor.ipAddress})}">🔍</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Нет посетителей -->
<div th:if="${recentVisitors == null or recentVisitors.isEmpty()}">
    <p style="color: orange; text-align: center; font-size: 1.2em;">
        🚫 Поки немає відвідувачів
    </p>
    <p style="text-align: center;">В базі даних поки немає записів про відвідувачів.</p>
</div>

<!-- Пагинация -->
<div th:if="${totalPages > 1}">
    <hr>
    <h3>📄 Навигация по страницам</h3>
    <p>
        <!-- Предыдущая страница -->
        <span th:if="${hasPrevious}">
                <a th:href="@{/analytics(page=${prevPage}, size=${pageSize})}">← Предыдущие</a>
            </span>

        <!-- Информация о странице -->
        <strong>
            Страница <span th:text="${currentPage + 1}">1</span>
            из <span th:text="${totalPages}">3</span>
        </strong>

        <!-- Следующая страница -->
        <span th:if="${hasNext}">
                <a th:href="@{/analytics(page=${nextPage}, size=${pageSize})}">Следующие →</a>
            </span>
    </p>

    <!-- Показать номера страниц -->
    <p>
        <strong>Перейти:</strong>
        <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
                <a th:if="${i != currentPage}"
                   th:href="@{/analytics(page=${i}, size=${pageSize})}"
                   th:text="${i + 1}">1</a>
                <strong th:if="${i == currentPage}" th:text="${i + 1}">1</strong>
                <span> </span>
            </span>
    </p>
</div>

<!-- Ошибки -->
<div th:if="${error}" style="color: red; border: 2px solid red; padding: 15px; margin: 10px 0; background-color: #ffe6e6;">
    <h3>❌ Ошибка</h3>
    <p th:text="${error}">Произошла ошибка загрузки аналитики</p>
</div>

<hr>

<!-- Быстрые действия -->
<h3>🚀 Быстрые действия</h3>
<ul>
    <li><a href="/analytics/countries">🌍 Подробная статистика по странам</a></li>
    <li><a href="/analytics/ip">🔍 Найти конкретный IP адрес</a></li>
    <li><a href="/analytics/top-ips">👥 Посмотреть топ IP адресов</a></li>
    <li><a href="/analytics/visitors">📄 Все посетители с полной пагинацией</a></li>
</ul>

<hr>

<!-- Автообновление -->
<p style="text-align: center;">
    <small style="color: gray;">
        🔄 Страница автоматически обновится через <span id="countdown">60</span> секунд
        | <button onclick="location.reload()">🔄 Обновить сейчас</button>
    </small>
</p>

<script>
    // Обратный отсчет и автообновление
    let countdown = 60;
    const countdownElement = document.getElementById('countdown');

    setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;

        if (countdown <= 0) {
            location.reload();
        }
    }, 1000);
</script>

</body>
</html>