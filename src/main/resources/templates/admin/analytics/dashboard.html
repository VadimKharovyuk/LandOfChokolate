<!--<!DOCTYPE html>-->
<!--<html lang="uk" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>ะะฝะฐะปััะธะบะฐ ะฒัะดะฒัะดัะฒะฐััะฒ - ะัะฐัะฝะฐ ัะพะบะพะปะฐะดั</title>-->

<!--    &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">-->
<!--    &lt;!&ndash; Bootstrap Icons &ndash;&gt;-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">-->

<!--    <style>-->
<!--        .stat-card {-->
<!--            transition: transform 0.2s;-->
<!--            border-left: 4px solid #007bff;-->
<!--        }-->
<!--        .stat-card:hover {-->
<!--            transform: translateY(-2px);-->
<!--        }-->
<!--        .stat-number {-->
<!--            font-size: 2rem;-->
<!--            font-weight: bold;-->
<!--            color: #007bff;-->
<!--        }-->
<!--        .table-hover tbody tr:hover {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .badge-country {-->
<!--            background: linear-gradient(45deg, #007bff, #28a745);-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="bg-light">-->
<!--<div class="container-fluid py-4">-->

<!--    &lt;!&ndash; ะะฐะณะพะปะพะฒะพะบ &ndash;&gt;-->
<!--    <div class="row mb-4">-->
<!--        <div class="col">-->
<!--            <h1 class="h3 mb-0">-->
<!--                <i class="bi bi-graph-up-arrow text-primary me-2"></i>-->
<!--                ะะฝะฐะปััะธะบะฐ ะฒัะดะฒัะดัะฒะฐััะฒ-->
<!--            </h1>-->
<!--            <p class="text-muted mb-0">ะกัะฐัะธััะธะบะฐ ะฒัะดะฒัะดัะฒะฐะฝั ัะฝัะตัะฝะตั-ะผะฐะณะฐะทะธะฝั</p>-->
<!--        </div>-->

<!--    </div>-->

<!--    &lt;!&ndash; ะัะฝะพะฒะฝะฐั ััะฐัะธััะธะบะฐ &ndash;&gt;-->
<!--    <div class="row mb-4">-->
<!--        &lt;!&ndash; ะัะตะณะพ ะฟะพัะตัะตะฝะธะน &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-people-fill text-primary mb-2" style="font-size: 2.5rem;"></i>-->
<!--&lt;!&ndash;                    <div class="stat-number" th:text="${stats.totalVisits ?: 0}">1,234</div>&ndash;&gt;-->
<!--                    <h6 class="text-muted mb-0">ะััะพะณะพ ะฒัะดะฒัะดัะฒะฐะฝั</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; ะะฐ ะฝะตะดะตะปั &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-calendar-week-fill text-success mb-2" style="font-size: 2.5rem;"></i>-->
<!--&lt;!&ndash;                    <div class="stat-number text-success" th:text="${stats.weeklyVisits ?: 0}">156</div>&ndash;&gt;-->
<!--                    <h6 class="text-muted mb-0">ะะฐ ัะธะถะดะตะฝั</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; ะกะตะณะพะดะฝั &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-calendar-day-fill text-info mb-2" style="font-size: 2.5rem;"></i>-->
<!--                    <div class="stat-number text-info" th:text="${todayVisits ?: 0}">23</div>-->
<!--                    <h6 class="text-muted mb-0">ะกัะพะณะพะดะฝั</h6>-->
<!--                    <small class="text-muted">ะฃะฝัะบะฐะปัะฝะธั: <span th:text="${todayUnique ?: 0}">15</span></small>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; ะะพะฑะธะปัะฝัะต &ndash;&gt;-->
<!--        <div class="col-lg-3 col-md-6 mb-3">-->
<!--            <div class="card stat-card h-100 shadow-sm">-->
<!--                <div class="card-body text-center">-->
<!--                    <i class="bi bi-phone-fill text-warning mb-2" style="font-size: 2.5rem;"></i>-->
<!--                    <div class="stat-number text-warning" th:text="${#numbers.formatDecimal(stats.mobilePercentage ?: 0, 1, 1)}">45.2</div>-->
<!--                    <h6 class="text-muted mb-0">% ะผะพะฑัะปัะฝะธั</h6>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <div class="row">-->
<!--        &lt;!&ndash; ะขะพะฟ ัััะฐะฝั &ndash;&gt;-->
<!--        <div class="col-lg-6 mb-4">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-globe2 text-primary me-2"></i>-->
<!--                        ะขะพะฟ ะบัะฐัะฝะธ (ัะธะถะดะตะฝั)-->
<!--                    </h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div th:if="${topCountries != null and !topCountries.isEmpty()}">-->
<!--                        <div th:each="country, countryStat : ${topCountries}"-->
<!--                             class="d-flex justify-content-between align-items-center py-2 border-bottom">-->
<!--                            <div class="d-flex align-items-center">-->
<!--                                    <span class="me-3" style="font-size: 1.5rem;">-->
<!--                                        &lt;!&ndash; ะัะพัััะต ัะผะพะดะทะธ ัะปะฐะณะพะฒ &ndash;&gt;-->
<!--                                        <span th:switch="${country[0]}">-->
<!--                                            <span th:case="'Ukraine'">๐บ๐ฆ</span>-->
<!--                                            <span th:case="'Poland'">๐ต๐ฑ</span>-->
<!--                                            <span th:case="'Germany'">๐ฉ๐ช</span>-->
<!--                                            <span th:case="'United States'">๐บ๐ธ</span>-->
<!--                                            <span th:case="'Canada'">๐จ๐ฆ</span>-->
<!--                                            <span th:case="*">๐</span>-->
<!--                                        </span>-->
<!--                                    </span>-->
<!--                                <div>-->
<!--                                    <strong th:text="${country[0] ?: 'ะะตะฒัะดะพะผะพ'}">Ukraine</strong>-->
<!--                                    <br>-->
<!--                                    <small class="text-muted">-->
<!--                                        ะะพะทะธััั #<span th:text="${countryStat.count}">1</span>-->
<!--                                    </small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <span class="badge badge-country text-white fs-6" th:text="${country[1]} + ' ะฒัะดะฒัะดัะฒะฐะฝั'">45 ะฒัะดะฒัะดัะฒะฐะฝั</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${topCountries == null or topCountries.isEmpty()}"-->
<!--                         class="text-center py-4 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2"></i>-->
<!--                        ะะพะบะธ ะฝะตะผะฐั ะดะฐะฝะธั ะฟะพ ะบัะฐัะฝะฐั-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; ะขะพะฟ ัััะฐะฝะธัั &ndash;&gt;-->
<!--        <div class="col-lg-6 mb-4">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-file-earmark-text text-primary me-2"></i>-->
<!--                        ะะพะฟัะปััะฝั ััะพััะฝะบะธ-->
<!--                    </h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div th:if="${topPages != null and !topPages.isEmpty()}">-->
<!--                        <div th:each="page, pageStat : ${topPages}"-->
<!--                             class="d-flex justify-content-between align-items-center py-2 border-bottom">-->
<!--                            <div class="flex-grow-1 me-3">-->
<!--                                <div class="text-truncate">-->
<!--                                    <i class="bi bi-link-45deg text-muted me-1"></i>-->
<!--                                    <code class="text-primary" th:text="${page[0] ?: '/'}"></code>-->
<!--                                </div>-->
<!--                                <small class="text-muted">-->
<!--                                    ะะพะทะธััั #<span th:text="${pageStat.count}">1</span>-->
<!--                                </small>-->
<!--                            </div>-->
<!--                            <span class="badge bg-secondary" th:text="${page[1]}">12</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${topPages == null or topPages.isEmpty()}"-->
<!--                         class="text-center py-4 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2"></i>-->
<!--                        ะะพะบะธ ะฝะตะผะฐั ะดะฐะฝะธั ะฟะพ ััะพััะฝะบะฐั-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; ะะพัะปะตะดะฝะธะต ะฟะพัะตัะธัะตะปะธ &ndash;&gt;-->
<!--    <div class="row">-->
<!--        <div class="col-12">-->
<!--            <div class="card shadow-sm">-->
<!--                <div class="card-header bg-white d-flex justify-content-between align-items-center">-->
<!--                    <h5 class="card-title mb-0">-->
<!--                        <i class="bi bi-clock-history text-primary me-2"></i>-->
<!--                        ะััะฐะฝะฝั ะฒัะดะฒัะดัะฒะฐัั-->
<!--                    </h5>-->
<!--                    <span class="badge bg-info" th:text="${#lists.size(recentVisitors)} + ' ะทะฐะฟะธััะฒ'">20 ะทะฐะฟะธััะฒ</span>-->
<!--                </div>-->
<!--                <div class="card-body p-0">-->
<!--                    <div th:if="${recentVisitors != null and !recentVisitors.isEmpty()}">-->
<!--                        <div class="table-responsive">-->
<!--                            <table class="table table-hover mb-0">-->
<!--                                <thead class="table-light">-->
<!--                                <tr>-->
<!--                                    <th width="15%">-->
<!--                                        <i class="bi bi-clock me-1"></i>ะงะฐั-->
<!--                                    </th>-->
<!--                                    <th width="15%">-->
<!--                                        <i class="bi bi-router me-1"></i>IP ะฐะดัะตัะฐ-->
<!--                                    </th>-->
<!--                                    <th width="20%">-->
<!--                                        <i class="bi bi-geo-alt me-1"></i>ะะพะบะฐััั-->
<!--                                    </th>-->
<!--                                    <th width="20%">-->
<!--                                        <i class="bi bi-device-ssd me-1"></i>ะัะธััััะน-->
<!--                                    </th>-->
<!--                                    <th width="30%">-->
<!--                                        <i class="bi bi-link me-1"></i>ะกัะพััะฝะบะฐ-->
<!--                                    </th>-->
<!--                                </tr>-->
<!--                                </thead>-->
<!--                                <tbody>-->
<!--                                <tr th:each="visitor : ${recentVisitors}">-->
<!--                                    &lt;!&ndash; ะัะตะผั &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div class="fw-bold" th:text="${#temporals.format(visitor.visitTime, 'HH:mm:ss')}">12:34:56</div>-->
<!--                                        <small class="text-muted" th:text="${#temporals.format(visitor.visitTime, 'dd.MM.yyyy')}">15.08.2024</small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; IP ะฐะดัะตั &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <code class="text-primary" th:text="${visitor.ipAddress}">192.168.1.1</code>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; ะะพะบะฐัะธั &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div>-->
<!--                                            <strong th:text="${visitor.country ?: 'ะะตะฒัะดะพะผะพ'}">Ukraine</strong>-->
<!--                                            <span th:if="${visitor.isBot}" class="badge bg-warning ms-1">๐ค BOT</span>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted" th:text="${visitor.city ?: 'ะัััะพ ะฝะตะฒัะดะพะผะต'}">Kyiv</small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; ะฃัััะพะนััะฒะพ &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div>-->
<!--                                            <span th:if="${visitor.isMobile}" class="badge bg-success">๐ฑ Mobile</span>-->
<!--                                            <span th:unless="${visitor.isMobile}" class="badge bg-primary">๐ป Desktop</span>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted">-->
<!--                                            <span th:text="${visitor.operatingSystem ?: 'Unknown OS'}">Windows</span>-->
<!--                                            <span th:if="${visitor.browserName}"> โข <span th:text="${visitor.browserName}">Chrome</span></span>-->
<!--                                        </small>-->
<!--                                    </td>-->

<!--                                    &lt;!&ndash; ะกััะฐะฝะธัะฐ &ndash;&gt;-->
<!--                                    <td>-->
<!--                                        <div class="text-truncate">-->
<!--                                            <code class="text-primary" th:text="${visitor.requestedUrl ?: '/'}"></code>-->
<!--                                        </div>-->
<!--                                        <small class="text-muted" th:if="${visitor.refererUrl}">-->
<!--                                            ะฒัะด: <span th:text="${visitor.refererUrl}"></span>-->
<!--                                        </small>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${recentVisitors == null or recentVisitors.isEmpty()}"-->
<!--                         class="text-center py-5 text-muted">-->
<!--                        <i class="bi bi-info-circle me-2" style="font-size: 2rem;"></i>-->
<!--                        <div class="mt-2">ะะพะบะธ ะฝะตะผะฐั ะฒัะดะฒัะดัะฒะฐััะฒ</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; ะัะธะฑะบะธ &ndash;&gt;-->
<!--    <div th:if="${error}" class="alert alert-danger mt-4">-->
<!--        <i class="bi bi-exclamation-triangle-fill me-2"></i>-->
<!--        <strong>ะะพะผะธะปะบะฐ:</strong> <span th:text="${error}">ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ ะดะฐะฝะฝัั</span>-->
<!--    </div>-->

<!--    &lt;!&ndash; ะคััะตั ั ะพะฑะฝะพะฒะปะตะฝะธะตะผ &ndash;&gt;-->
<!--    <div class="row mt-5">-->
<!--        <div class="col text-center">-->
<!--            <small class="text-muted">-->
<!--                <i class="bi bi-arrow-clockwise me-1"></i>-->
<!--                ะััะฐะฝะฝั ะพะฝะพะฒะปะตะฝะฝั: <span id="lastUpdate"></span>-->
<!--                <button class="btn btn-sm btn-outline-secondary ms-2" onclick="location.reload()">-->
<!--                    <i class="bi bi-arrow-clockwise"></i> ะะฝะพะฒะธัะธ-->
<!--                </button>-->
<!--            </small>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Bootstrap JS &ndash;&gt;-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--    // ะะพะบะฐะทัะฒะฐะตะผ ะฒัะตะผั ะฟะพัะปะตะดะฝะตะณะพ ะพะฑะฝะพะฒะปะตะฝะธั-->
<!--    document.getElementById('lastUpdate').textContent = new Date().toLocaleString('uk-UA');-->

<!--    // ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต ะบะฐะถะดัะต 60 ัะตะบัะฝะด-->
<!--    setInterval(function() {-->
<!--        location.reload();-->
<!--    }, 60000);-->

<!--    // ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ะทะฐะณััะทะบะต-->
<!--    console.log('๐ ะะฝะฐะปััะธะบะฐ ะฒัะดะฒัะดัะฒะฐััะฒ ะทะฐะฒะฐะฝัะฐะถะตะฝะฐ ััะฟััะฝะพ');-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!-- ะ admin/analytics/dashboard.html ะดะพะฑะฐะฒััะต ะฟะพัะปะต ัะฐะฑะปะธัั ะฟะพัะตัะธัะตะปะตะน: -->

<!-- ะะพัะปะตะดะฝะธะต ะฟะพัะตัะธัะตะปะธ -->
<div class="row">
    <div class="col-12">
        <div class="card shadow-sm">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">
                    <i class="bi bi-clock-history text-primary me-2"></i>
                    ะััะฐะฝะฝั ะฒัะดะฒัะดัะฒะฐัั
                </h5>
                <div>
                    <span class="badge bg-info" th:text="${totalElements} + ' ะทะฐะฟะธััะฒ'">20 ะทะฐะฟะธััะฒ</span>
                    <a href="/analytics/visitors" class="btn btn-sm btn-outline-primary ms-2">
                        ะะพะบะฐะทะฐัั ะฒัะต
                    </a>
                </div>
            </div>
            <div class="card-body p-0">
                <div th:if="${recentVisitors != null and !recentVisitors.isEmpty()}">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                            <tr>
                                <th width="15%">ะงะฐั</th>
                                <th width="15%">IP ะฐะดัะตัะฐ</th>
                                <th width="20%">ะะพะบะฐััั</th>
                                <th width="20%">ะัะธััััะน</th>
                                <th width="30%">ะกัะพััะฝะบะฐ</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="visitor : ${recentVisitors}">
                                <!-- ะัะตะผั -->
                                <td>
                                    <div class="fw-bold" th:text="${#temporals.format(visitor.visitTime, 'HH:mm:ss')}">12:34:56</div>
                                    <small class="text-muted" th:text="${#temporals.format(visitor.visitTime, 'dd.MM.yyyy')}">15.08.2024</small>
                                </td>

                                <!-- IP ะฐะดัะตั ั ัััะปะบะพะน ะฝะฐ ะดะตัะฐะปะธ -->
                                <td>
                                    <a th:href="@{/analytics/ip(ip=${visitor.ipAddress})}" class="text-decoration-none">
                                        <code class="text-primary" th:text="${visitor.ipAddress}">192.168.1.1</code>
                                    </a>
                                </td>

                                <!-- ะะพะบะฐัะธั -->
                                <td>
                                    <div>
                                        <strong th:text="${visitor.country ?: 'ะะตะฒัะดะพะผะพ'}">Ukraine</strong>
                                        <span th:if="${visitor.isBot}" class="badge bg-warning ms-1">๐ค BOT</span>
                                    </div>
                                    <small class="text-muted" th:text="${visitor.city ?: 'ะัััะพ ะฝะตะฒัะดะพะผะต'}">Kyiv</small>
                                </td>

                                <!-- ะฃัััะพะนััะฒะพ -->
                                <td>
                                    <div>
                                        <span th:if="${visitor.isMobile}" class="badge bg-success">๐ฑ Mobile</span>
                                        <span th:unless="${visitor.isMobile}" class="badge bg-primary">๐ป Desktop</span>
                                    </div>
                                    <small class="text-muted">
                                        <span th:text="${visitor.operatingSystem ?: 'Unknown OS'}">Windows</span>
                                        <span th:if="${visitor.browserName}"> โข <span th:text="${visitor.browserName}">Chrome</span></span>
                                    </small>
                                </td>

                                <!-- ะกััะฐะฝะธัะฐ -->
                                <td>
                                    <div class="text-truncate">
                                        <code class="text-primary" th:text="${visitor.requestedUrl ?: '/'}"></code>
                                    </div>
                                    <small class="text-muted" th:if="${visitor.refererUrl}">
                                        ะฒัะด: <span th:text="${visitor.refererUrl}"></span>
                                    </small>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ะัะพััะฐั ะฟะฐะณะธะฝะฐัะธั -->
                    <div class="card-footer bg-light" th:if="${totalPages > 1}">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <small class="text-muted">
                                    ะะพะบะฐะทะฐะฝะพ <span th:text="${#lists.size(recentVisitors)}">20</span>
                                    ะธะท <span th:text="${totalElements}">50</span> ะทะฐะฟะธัะตะน
                                </small>
                            </div>
                            <div>
                                <!-- ะัะตะดัะดััะฐั ัััะฐะฝะธัะฐ -->
                                <a th:if="${hasPrevious}"
                                   th:href="@{/analytics(page=${prevPage}, size=${pageSize})}"
                                   class="btn btn-sm btn-outline-secondary me-2">
                                    โ ะัะตะดัะดััะธะต
                                </a>

                                <!-- ะะพะผะตั ัััะฐะฝะธัั -->
                                <span class="badge bg-secondary me-2">
                                    ะกััะฐะฝะธัะฐ <span th:text="${currentPage + 1}">1</span>
                                    ะธะท <span th:text="${totalPages}">3</span>
                                </span>

                                <!-- ะกะปะตะดัััะฐั ัััะฐะฝะธัะฐ -->
                                <a th:if="${hasNext}"
                                   th:href="@{/analytics(page=${nextPage}, size=${pageSize})}"
                                   class="btn btn-sm btn-outline-secondary">
                                    ะกะปะตะดัััะธะต โ
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:if="${recentVisitors == null or recentVisitors.isEmpty()}"
                     class="text-center py-5 text-muted">
                    <i class="bi bi-info-circle me-2" style="font-size: 2rem;"></i>
                    <div class="mt-2">ะะพะบะธ ะฝะตะผะฐั ะฒัะดะฒัะดัะฒะฐััะฒ</div>
                </div>
            </div>
        </div>
    </div>
</div>