<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="uk">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Управління замовленнями - Land of Chocolate</title>-->
<!--  <meta name="description" content="Адміністрування замовлень - Land of Chocolate">-->

<!--  &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--  &lt;!&ndash; Font Awesome &ndash;&gt;-->
<!--  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">-->
<!--  &lt;!&ndash; Google Fonts &ndash;&gt;-->
<!--  <link rel="preconnect" href="https://fonts.googleapis.com">-->
<!--  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
<!--  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">-->
<!--  &lt;!&ndash; Custom CSS &ndash;&gt;-->
<!--  <link rel="stylesheet" th:href="@{/css/fragment/navigation.css}">-->
<!--  <link rel="stylesheet" th:href="@{/css/fragment/footer.css}">-->

<!--  <style>-->
<!--    :root {-->
<!--      &#45;&#45;primary-dark: #2C2C2C;-->
<!--      &#45;&#45;primary-medium: #5A5A5A;-->
<!--      &#45;&#45;primary-light: #FAFAFA;-->
<!--      &#45;&#45;accent-gold: #D4AF37;-->
<!--      &#45;&#45;accent-warm: #F5F5F0;-->
<!--      &#45;&#45;text-primary: #1A1A1A;-->
<!--      &#45;&#45;text-secondary: #757575;-->
<!--      &#45;&#45;border-subtle: #E8E8E8;-->
<!--      &#45;&#45;shadow-soft: rgba(0, 0, 0, 0.04);-->
<!--      &#45;&#45;shadow-medium: rgba(0, 0, 0, 0.08);-->
<!--      &#45;&#45;success-color: #28a745;-->
<!--      &#45;&#45;warning-color: #ffc107;-->
<!--      &#45;&#45;danger-color: #dc3545;-->
<!--      &#45;&#45;info-color: #17a2b8;-->
<!--    }-->

<!--    * {-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--      box-sizing: border-box;-->
<!--    }-->

<!--    body {-->
<!--      font-family: 'Inter', sans-serif;-->
<!--      font-weight: 400;-->
<!--      line-height: 1.7;-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      background-color: #FFFFFF;-->
<!--      letter-spacing: -0.01em;-->
<!--    }-->

<!--    .serif-font {-->
<!--      font-family: 'Cormorant Garamond', serif;-->
<!--    }-->

<!--    /* Основной контент с отступом от навигации */-->
<!--    .main-content {-->
<!--      margin-top: 80px;-->
<!--    }-->

<!--    .main-container {-->
<!--      max-width: 1400px;-->
<!--      margin: 0 auto;-->
<!--      padding: 0 2rem;-->
<!--    }-->

<!--    /* Breadcrumbs */-->
<!--    .breadcrumb-container {-->
<!--      padding: 2rem 0 1rem;-->
<!--      border-bottom: 1px solid var(&#45;&#45;border-subtle);-->
<!--    }-->

<!--    .breadcrumb {-->
<!--      background: none;-->
<!--      padding: 0;-->
<!--      margin: 0;-->
<!--      font-size: 0.9rem;-->
<!--    }-->

<!--    .breadcrumb-item {-->
<!--      color: var(&#45;&#45;text-secondary);-->
<!--    }-->

<!--    .breadcrumb-item a {-->
<!--      color: var(&#45;&#45;text-secondary);-->
<!--      text-decoration: none;-->
<!--      transition: color 0.2s ease;-->
<!--    }-->

<!--    .breadcrumb-item a:hover {-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--    }-->

<!--    .breadcrumb-item.active {-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      font-weight: 500;-->
<!--    }-->

<!--    /* Header Section */-->
<!--    .admin-header {-->
<!--      padding: 3rem 0;-->
<!--      text-align: center;-->
<!--      border-bottom: 1px solid var(&#45;&#45;border-subtle);-->
<!--    }-->

<!--    .admin-icon {-->
<!--      font-size: 3.5rem;-->
<!--      color: var(&#45;&#45;accent-gold);-->
<!--      margin-bottom: 1.5rem;-->
<!--    }-->

<!--    .admin-title {-->
<!--      font-family: 'Cormorant Garamond', serif;-->
<!--      font-size: 3rem;-->
<!--      font-weight: 500;-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      margin-bottom: 1rem;-->
<!--      letter-spacing: -0.02em;-->
<!--      line-height: 1.2;-->
<!--    }-->

<!--    .admin-subtitle {-->
<!--      color: var(&#45;&#45;text-secondary);-->
<!--      font-size: 1.2rem;-->
<!--      max-width: 600px;-->
<!--      margin: 0 auto;-->
<!--    }-->

<!--    /* Alert Messages */-->
<!--    .alert-custom {-->
<!--      border: none;-->
<!--      border-radius: 8px;-->
<!--      padding: 1.5rem;-->
<!--      margin: 2rem 0;-->
<!--      box-shadow: 0 4px 12px var(&#45;&#45;shadow-soft);-->
<!--      border-left: 4px solid;-->
<!--    }-->

<!--    .alert-success-custom {-->
<!--      background: #f8fff9;-->
<!--      border-left-color: var(&#45;&#45;success-color);-->
<!--      color: #155724;-->
<!--    }-->

<!--    .alert-error-custom {-->
<!--      background: #fff5f5;-->
<!--      border-left-color: var(&#45;&#45;danger-color);-->
<!--      color: #721c24;-->
<!--    }-->

<!--    /* Main Section */-->
<!--    .admin-section {-->
<!--      padding: 4rem 0;-->
<!--    }-->

<!--    .admin-container {-->
<!--      background: #FFFFFF;-->
<!--      border: 1px solid var(&#45;&#45;border-subtle);-->
<!--      border-radius: 12px;-->
<!--      padding: 2rem;-->
<!--      box-shadow: 0 10px 30px var(&#45;&#45;shadow-soft);-->
<!--    }-->

<!--    /* Controls Bar */-->
<!--    .controls-bar {-->
<!--      display: flex;-->
<!--      justify-content: space-between;-->
<!--      align-items: center;-->
<!--      margin-bottom: 2rem;-->
<!--      padding-bottom: 1rem;-->
<!--      border-bottom: 1px solid var(&#45;&#45;border-subtle);-->
<!--    }-->

<!--    .controls-left {-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      gap: 1rem;-->
<!--    }-->

<!--    .controls-right {-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      gap: 1rem;-->
<!--    }-->

<!--    .btn-custom {-->
<!--      padding: 0.5rem 1rem;-->
<!--      border-radius: 6px;-->
<!--      font-size: 0.9rem;-->
<!--      font-weight: 500;-->
<!--      text-decoration: none;-->
<!--      display: inline-flex;-->
<!--      align-items: center;-->
<!--      gap: 0.5rem;-->
<!--      transition: all 0.2s ease;-->
<!--      border: none;-->
<!--      cursor: pointer;-->
<!--    }-->

<!--    .btn-primary-custom {-->
<!--      background: var(&#45;&#45;text-primary);-->
<!--      color: #FFFFFF;-->
<!--    }-->

<!--    .btn-primary-custom:hover {-->
<!--      background: var(&#45;&#45;primary-medium);-->
<!--      color: #FFFFFF;-->
<!--      transform: translateY(-1px);-->
<!--      box-shadow: 0 4px 12px var(&#45;&#45;shadow-medium);-->
<!--    }-->

<!--    /* Form Controls */-->
<!--    .form-control-custom {-->
<!--      border: 1px solid var(&#45;&#45;border-subtle);-->
<!--      border-radius: 6px;-->
<!--      padding: 0.5rem 0.75rem;-->
<!--      font-size: 0.9rem;-->
<!--      transition: all 0.2s ease;-->
<!--    }-->

<!--    .form-control-custom:focus {-->
<!--      border-color: var(&#45;&#45;text-primary);-->
<!--      box-shadow: 0 0 0 0.2rem rgba(42, 42, 42, 0.1);-->
<!--      outline: none;-->
<!--    }-->

<!--    .form-select-custom {-->
<!--      border: 1px solid var(&#45;&#45;border-subtle);-->
<!--      border-radius: 6px;-->
<!--      padding: 0.5rem 0.75rem;-->
<!--      font-size: 0.9rem;-->
<!--      background: #FFFFFF;-->
<!--      cursor: pointer;-->
<!--    }-->

<!--    /* Orders Table */-->
<!--    .orders-table {-->
<!--      width: 100%;-->
<!--      border-collapse: collapse;-->
<!--      margin-top: 1rem;-->
<!--    }-->

<!--    .orders-table th,-->
<!--    .orders-table td {-->
<!--      padding: 1rem 0.75rem;-->
<!--      text-align: left;-->
<!--      border-bottom: 1px solid var(&#45;&#45;border-subtle);-->
<!--      vertical-align: middle;-->
<!--    }-->

<!--    .orders-table th {-->
<!--      background: var(&#45;&#45;primary-light);-->
<!--      font-weight: 600;-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      font-size: 0.9rem;-->
<!--      white-space: nowrap;-->
<!--    }-->

<!--    .orders-table td {-->
<!--      font-size: 0.9rem;-->
<!--    }-->

<!--    .orders-table tbody tr:hover {-->
<!--      background: var(&#45;&#45;accent-warm);-->
<!--    }-->

<!--    /* Status Badges */-->
<!--    .badge-custom {-->
<!--      padding: 0.25rem 0.5rem;-->
<!--      border-radius: 12px;-->
<!--      font-size: 0.75rem;-->
<!--      font-weight: 500;-->
<!--      text-transform: uppercase;-->
<!--      letter-spacing: 0.5px;-->
<!--    }-->

<!--    .badge-primary { background: #007bff; color: white; }-->
<!--    .badge-success { background: #28a745; color: white; }-->
<!--    .badge-warning { background: #ffc107; color: #212529; }-->
<!--    .badge-danger { background: #dc3545; color: white; }-->
<!--    .badge-info { background: #17a2b8; color: white; }-->
<!--    .badge-secondary { background: #6c757d; color: white; }-->

<!--    /* Action Buttons */-->
<!--    .action-buttons {-->
<!--      display: flex;-->
<!--      gap: 0.5rem;-->
<!--    }-->

<!--    .btn-sm-custom {-->
<!--      padding: 0.25rem 0.5rem;-->
<!--      font-size: 0.75rem;-->
<!--      border-radius: 4px;-->
<!--    }-->

<!--    .btn-outline-custom {-->
<!--      background: transparent;-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      border: 1px solid var(&#45;&#45;border-subtle);-->
<!--    }-->

<!--    .btn-outline-custom:hover {-->
<!--      background: var(&#45;&#45;primary-light);-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--    }-->

<!--    /* Pagination */-->
<!--    .pagination-container {-->
<!--      display: flex;-->
<!--      justify-content: space-between;-->
<!--      align-items: center;-->
<!--      margin-top: 2rem;-->
<!--      padding-top: 1rem;-->
<!--      border-top: 1px solid var(&#45;&#45;border-subtle);-->
<!--    }-->

<!--    .pagination-info {-->
<!--      color: var(&#45;&#45;text-secondary);-->
<!--      font-size: 0.9rem;-->
<!--    }-->

<!--    .pagination-custom {-->
<!--      display: flex;-->
<!--      gap: 0.5rem;-->
<!--    }-->

<!--    .page-link-custom {-->
<!--      padding: 0.5rem 0.75rem;-->
<!--      border: 1px solid var(&#45;&#45;border-subtle);-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--      text-decoration: none;-->
<!--      border-radius: 4px;-->
<!--      transition: all 0.2s ease;-->
<!--    }-->

<!--    .page-link-custom:hover {-->
<!--      background: var(&#45;&#45;primary-light);-->
<!--      color: var(&#45;&#45;text-primary);-->
<!--    }-->

<!--    .page-link-custom.active {-->
<!--      background: var(&#45;&#45;text-primary);-->
<!--      color: white;-->
<!--      border-color: var(&#45;&#45;text-primary);-->
<!--    }-->

<!--    .page-link-custom.disabled {-->
<!--      opacity: 0.5;-->
<!--      pointer-events: none;-->
<!--    }-->

<!--    /* Responsive */-->
<!--    @media (max-width: 1200px) {-->
<!--      .orders-table {-->
<!--        font-size: 0.8rem;-->
<!--      }-->

<!--      .orders-table th,-->
<!--      .orders-table td {-->
<!--        padding: 0.75rem 0.5rem;-->
<!--      }-->
<!--    }-->

<!--    @media (max-width: 768px) {-->
<!--      .main-container {-->
<!--        padding: 0 1rem;-->
<!--      }-->

<!--      .admin-header {-->
<!--        padding: 2rem 0;-->
<!--      }-->

<!--      .admin-title {-->
<!--        font-size: 2rem;-->
<!--      }-->

<!--      .controls-bar {-->
<!--        flex-direction: column;-->
<!--        gap: 1rem;-->
<!--        align-items: stretch;-->
<!--      }-->

<!--      .controls-left,-->
<!--      .controls-right {-->
<!--        justify-content: center;-->
<!--      }-->

<!--      .orders-table {-->
<!--        display: block;-->
<!--        overflow-x: auto;-->
<!--        white-space: nowrap;-->
<!--      }-->

<!--      .pagination-container {-->
<!--        flex-direction: column;-->
<!--        gap: 1rem;-->
<!--      }-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--&lt;!&ndash; Навигация &ndash;&gt;-->
<!--<div th:insert="~{admin/fragments/navigation :: navigation}"></div>-->

<!--&lt;!&ndash; Основной контент &ndash;&gt;-->
<!--<div class="main-content">-->
<!--  <div class="main-container">-->
<!--    &lt;!&ndash; Breadcrumbs &ndash;&gt;-->
<!--    <nav class="breadcrumb-container" aria-label="breadcrumb">-->
<!--      <ol class="breadcrumb">-->
<!--        <li class="breadcrumb-item"><a href="/admin">Адмін панель</a></li>-->
<!--        <li class="breadcrumb-item active" aria-current="page">Замовлення</li>-->
<!--      </ol>-->
<!--    </nav>-->

<!--    &lt;!&ndash; Header Section &ndash;&gt;-->
<!--    <header class="admin-header">-->
<!--      <div class="admin-icon">-->
<!--        <i class="fas fa-shopping-cart"></i>-->
<!--      </div>-->
<!--      <h1 class="admin-title serif-font">Управління замовленнями</h1>-->
<!--      <p class="admin-subtitle">-->
<!--        Перегляд, редагування та управління всіма замовленнями магазину-->
<!--      </p>-->
<!--    </header>-->

<!--    &lt;!&ndash; Alert Messages &ndash;&gt;-->
<!--    <div th:if="${successMessage}" class="alert-custom alert-success-custom">-->
<!--      <i class="fas fa-check-circle me-2"></i>-->
<!--      <span th:text="${successMessage}"></span>-->
<!--    </div>-->

<!--    <div th:if="${errorMessage}" class="alert-custom alert-error-custom">-->
<!--      <i class="fas fa-exclamation-triangle me-2"></i>-->
<!--      <span th:text="${errorMessage}"></span>-->
<!--    </div>-->

<!--    &lt;!&ndash; Main Section &ndash;&gt;-->
<!--    <section class="admin-section">-->
<!--      <div class="admin-container">-->
<!--        &lt;!&ndash; Controls Bar &ndash;&gt;-->
<!--        <div class="controls-bar">-->
<!--          <div class="controls-left">-->
<!--                            <span class="text-muted">-->
<!--                                <strong th:text="${orders.metadata.totalElements}">0</strong> замовлень знайдено-->
<!--                            </span>-->
<!--          </div>-->
<!--          <div class="controls-right">-->
<!--            &lt;!&ndash; Page Size Selector &ndash;&gt;-->
<!--            <select class="form-select-custom" id="pageSizeSelect" onchange="changePageSize()">-->
<!--              <option value="10" th:selected="${pageSize == 10}">10 на сторінці</option>-->
<!--              <option value="25" th:selected="${pageSize == 25}">25 на сторінці</option>-->
<!--              <option value="50" th:selected="${pageSize == 50}">50 на сторінці</option>-->
<!--            </select>-->

<!--            &lt;!&ndash; Sort Selector &ndash;&gt;-->
<!--            <select class="form-select-custom" id="sortSelect" onchange="changeSort()">-->
<!--              <option value="createdAt,desc" th:selected="${sortBy == 'createdAt' && sortDir == 'desc'}">-->
<!--                Новіші спочатку-->
<!--              </option>-->
<!--              <option value="createdAt,asc" th:selected="${sortBy == 'createdAt' && sortDir == 'asc'}">-->
<!--                Старіші спочатку-->
<!--              </option>-->
<!--              <option value="totalAmount,desc" th:selected="${sortBy == 'totalAmount' && sortDir == 'desc'}">-->
<!--                За сумою ↓-->
<!--              </option>-->
<!--              <option value="totalAmount,asc" th:selected="${sortBy == 'totalAmount' && sortDir == 'asc'}">-->
<!--                За сумою ↑-->
<!--              </option>-->
<!--              <option value="customerName,asc" th:selected="${sortBy == 'customerName' && sortDir == 'asc'}">-->
<!--                За ім'ям A-Z-->
<!--              </option>-->
<!--            </select>-->
<!--          </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Orders Table &ndash;&gt;-->
<!--        <div class="table-responsive">-->
<!--          <table class="orders-table">-->
<!--            <thead>-->
<!--            <tr>-->
<!--              <th>#</th>-->
<!--              <th>Клієнт</th>-->
<!--              <th>Email</th>-->
<!--              <th>Телефон</th>-->
<!--              <th>Сума</th>-->
<!--              <th>Статус</th>-->
<!--              <th>Доставка</th>-->
<!--              <th>Дата</th>-->
<!--              <th>Дії</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr th:each="order : ${orders.content}" th:if="${not #lists.isEmpty(orders.content)}">-->
<!--              <td>-->
<!--                <strong th:text="'#' + ${order.id}"></strong>-->
<!--              </td>-->
<!--              <td>-->
<!--                <div>-->
<!--                  <strong th:text="${order.customerName}"></strong>-->
<!--                  <br>-->
<!--                  <small class="text-muted">-->
<!--                    <i class="fas fa-box me-1"></i>-->
<!--                    <span th:text="${order.itemsCount}"></span> товарів-->
<!--                  </small>-->
<!--                </div>-->
<!--              </td>-->
<!--              <td>-->
<!--                <a th:href="'mailto:' + ${order.email}"-->
<!--                   th:text="${order.email}"-->
<!--                   class="text-decoration-none"></a>-->
<!--              </td>-->
<!--              <td>-->
<!--                <a th:href="'tel:' + ${order.phoneNumber}"-->
<!--                   th:text="${order.phoneNumber}"-->
<!--                   class="text-decoration-none"></a>-->
<!--              </td>-->
<!--              <td>-->
<!--                <strong th:text="${order.formattedAmount}" class="text-success"></strong>-->
<!--              </td>-->
<!--              <td>-->
<!--                                        <span class="badge-custom"-->
<!--                                              th:classappend="${order.statusBadgeClass}"-->
<!--                                              th:text="${order.statusDisplayName}"></span>-->
<!--              </td>-->
<!--              <td>-->
<!--                                        <span class="badge-custom"-->
<!--                                              th:classappend="${order.deliveryMethodBadgeClass}">-->
<!--                                            <i th:class="${order.deliveryMethodIcon}" class="me-1"></i>-->
<!--                                            <span th:text="${order.deliveryMethodDisplayName}"></span>-->
<!--                                        </span>-->
<!--              </td>-->
<!--              <td>-->
<!--                <div th:text="${#temporals.format(order.createdAt, 'dd.MM.yyyy')}"></div>-->
<!--                <small class="text-muted" th:text="${#temporals.format(order.createdAt, 'HH:mm')}"></small>-->
<!--              </td>-->
<!--              <td>-->
<!--                <div class="action-buttons">-->
<!--                  <a th:href="@{'/admin/orders/' + ${order.id}}"-->
<!--                     class="btn-custom btn-sm-custom btn-outline-custom"-->
<!--                     title="Переглянути">-->
<!--                    <i class="fas fa-eye"></i>-->
<!--                  </a>-->
<!--                  <button type="button"-->
<!--                          class="btn-custom btn-sm-custom btn-outline-custom"-->
<!--                          th:onclick="'quickStatusUpdate(' + ${order.id} + ')'"-->
<!--                          title="Швидке редагування">-->
<!--                    <i class="fas fa-edit"></i>-->
<!--                  </button>-->
<!--                </div>-->
<!--              </td>-->
<!--            </tr>-->
<!--            <tr th:if="${#lists.isEmpty(orders.content)}">-->
<!--              <td colspan="9" class="text-center text-muted py-4">-->
<!--                <i class="fas fa-inbox fa-2x mb-3 d-block"></i>-->
<!--                Замовлення не знайдено-->
<!--              </td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--          </table>-->
<!--        </div>-->

<!--        &lt;!&ndash; Pagination &ndash;&gt;-->
<!--        <div class="pagination-container" th:if="${orders.metadata.totalPages > 1}">-->
<!--          <div class="pagination-info">-->
<!--            Показано <span th:text="${orders.content.size()}"></span> з-->
<!--            <span th:text="${orders.metadata.totalElements}"></span> записів-->
<!--          </div>-->

<!--          <div class="pagination-custom">-->
<!--            &lt;!&ndash; Previous Page &ndash;&gt;-->
<!--            <a th:href="@{/admin/orders(page=${currentPage - 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"-->
<!--               class="page-link-custom"-->
<!--               th:classappend="${orders.metadata.first} ? 'disabled' : ''"-->
<!--               th:if="${not orders.metadata.first}">-->
<!--              <i class="fas fa-chevron-left"></i>-->
<!--            </a>-->

<!--            &lt;!&ndash; Page Numbers &ndash;&gt;-->
<!--            <th:block th:each="i : ${#numbers.sequence(0, orders.metadata.totalPages - 1)}"-->
<!--                      th:if="${i >= (currentPage - 2) && i <= (currentPage + 2)}">-->
<!--              <a th:href="@{/admin/orders(page=${i}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"-->
<!--                 class="page-link-custom"-->
<!--                 th:classappend="${i == currentPage} ? 'active' : ''"-->
<!--                 th:text="${i + 1}"></a>-->
<!--            </th:block>-->

<!--            &lt;!&ndash; Next Page &ndash;&gt;-->
<!--            <a th:href="@{/admin/orders(page=${currentPage + 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"-->
<!--               class="page-link-custom"-->
<!--               th:classappend="${orders.metadata.last} ? 'disabled' : ''"-->
<!--               th:if="${not orders.metadata.last}">-->
<!--              <i class="fas fa-chevron-right"></i>-->
<!--            </a>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </section>-->
<!--  </div>-->
<!--</div>-->

<!--&lt;!&ndash; Подвал &ndash;&gt;-->
<!--<div th:insert="~{admin/fragments/footer :: footer}"></div>-->

<!--&lt;!&ndash; JavaScript &ndash;&gt;-->
<!--<script th:replace="~{admin/fragments/navigation :: navigation-script}"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--  // Изменение размера страницы-->
<!--  function changePageSize() {-->
<!--    const size = document.getElementById('pageSizeSelect').value;-->
<!--    const url = new URL(window.location);-->
<!--    url.searchParams.set('size', size);-->
<!--    url.searchParams.set('page', '0'); // Сброс на первую страницу-->
<!--    window.location.href = url.toString();-->
<!--  }-->

<!--  // Изменение сортировки-->
<!--  function changeSort() {-->
<!--    const sortValue = document.getElementById('sortSelect').value;-->
<!--    const [sortBy, sortDir] = sortValue.split(',');-->
<!--    const url = new URL(window.location);-->
<!--    url.searchParams.set('sortBy', sortBy);-->
<!--    url.searchParams.set('sortDir', sortDir);-->
<!--    url.searchParams.set('page', '0'); // Сброс на первую страницу-->
<!--    window.location.href = url.toString();-->
<!--  }-->

<!--  // Быстрое обновление статуса (заготовка)-->
<!--  function quickStatusUpdate(orderId) {-->
<!--    // Здесь можно добавить модальное окно для быстрого изменения статуса-->
<!--    window.location.href = `/admin/orders/${orderId}`;-->
<!--  }-->

<!--  // Подтверждение удаления-->
<!--  function confirmDelete(orderId) {-->
<!--    if (confirm('Ви впевнені, що хочете видалити це замовлення?')) {-->
<!--      const form = document.createElement('form');-->
<!--      form.method = 'POST';-->
<!--      form.action = `/admin/orders/${orderId}/delete`;-->
<!--      document.body.appendChild(form);-->
<!--      form.submit();-->
<!--    }-->
<!--  }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Управління замовленнями - Land of Chocolate</title>
  <meta name="description" content="Адміністрування замовлень - Land of Chocolate">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/fragment/navigation.css}">
  <link rel="stylesheet" th:href="@{/css/fragment/footer.css}">

  <style>
    :root {
      --primary-dark: #2C2C2C;
      --primary-medium: #5A5A5A;
      --primary-light: #FAFAFA;
      --accent-gold: #D4AF37;
      --accent-warm: #F5F5F0;
      --text-primary: #1A1A1A;
      --text-secondary: #757575;
      --border-subtle: #E8E8E8;
      --shadow-soft: rgba(0, 0, 0, 0.04);
      --shadow-medium: rgba(0, 0, 0, 0.08);
      --success-color: #28a745;
      --warning-color: #ffc107;
      --danger-color: #dc3545;
      --info-color: #17a2b8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      font-weight: 400;
      line-height: 1.7;
      color: var(--text-primary);
      background-color: #FFFFFF;
      letter-spacing: -0.01em;
    }

    .serif-font {
      font-family: 'Cormorant Garamond', serif;
    }

    /* Основной контент с отступом от навигации */
    .main-content {
      margin-top: 80px;
    }

    .main-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    /* Breadcrumbs */
    .breadcrumb-container {
      padding: 2rem 0 1rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    .breadcrumb {
      background: none;
      padding: 0;
      margin: 0;
      font-size: 0.9rem;
    }

    .breadcrumb-item {
      color: var(--text-secondary);
    }

    .breadcrumb-item a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .breadcrumb-item a:hover {
      color: var(--text-primary);
    }

    .breadcrumb-item.active {
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Header Section */
    .admin-header {
      padding: 3rem 0;
      text-align: center;
      border-bottom: 1px solid var(--border-subtle);
    }

    .admin-icon {
      font-size: 3.5rem;
      color: var(--accent-gold);
      margin-bottom: 1.5rem;
    }

    .admin-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3rem;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    .admin-subtitle {
      color: var(--text-secondary);
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Alert Messages */
    .alert-custom {
      border: none;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
      box-shadow: 0 4px 12px var(--shadow-soft);
      border-left: 4px solid;
    }

    .alert-success-custom {
      background: #f8fff9;
      border-left-color: var(--success-color);
      color: #155724;
    }

    .alert-error-custom {
      background: #fff5f5;
      border-left-color: var(--danger-color);
      color: #721c24;
    }

    /* Main Section */
    .admin-section {
      padding: 4rem 0;
    }

    .admin-container {
      background: #FFFFFF;
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 10px 30px var(--shadow-soft);
    }

    /* Controls Bar */
    .controls-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    .controls-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .controls-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .btn-custom {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 500;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
    }

    .btn-primary-custom {
      background: var(--text-primary);
      color: #FFFFFF;
    }

    .btn-primary-custom:hover {
      background: var(--primary-medium);
      color: #FFFFFF;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px var(--shadow-medium);
    }

    /* Form Controls */
    .form-control-custom {
      border: 1px solid var(--border-subtle);
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      font-size: 0.9rem;
      transition: all 0.2s ease;
    }

    .form-control-custom:focus {
      border-color: var(--text-primary);
      box-shadow: 0 0 0 0.2rem rgba(42, 42, 42, 0.1);
      outline: none;
    }

    .form-select-custom {
      border: 1px solid var(--border-subtle);
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      font-size: 0.9rem;
      background: #FFFFFF;
      cursor: pointer;
    }

    /* Orders Table */
    .orders-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .orders-table th,
    .orders-table td {
      padding: 1rem 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
      vertical-align: middle;
    }

    .orders-table th {
      background: var(--primary-light);
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .orders-table td {
      font-size: 0.9rem;
    }

    .orders-table tbody tr:hover {
      background: var(--accent-warm);
    }

    /* Status Badges */
    .badge-custom {
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-primary { background: #007bff; color: white; }
    .badge-success { background: #28a745; color: white; }
    .badge-warning { background: #ffc107; color: #212529; }
    .badge-danger { background: #dc3545; color: white; }
    .badge-info { background: #17a2b8; color: white; }
    .badge-secondary { background: #6c757d; color: white; }

    /* Payment Info Styles */
    .payment-info {
      min-width: 140px;
    }

    .payment-method {
      margin-bottom: 0.25rem;
    }

    .payment-method span {
      font-size: 0.8rem;
      color: var(--text-primary);
    }

    .payment-status .badge-custom {
      font-size: 0.7rem;
      padding: 0.2rem 0.4rem;
    }

    .badge-sm {
      font-size: 0.7rem !important;
      padding: 0.2rem 0.4rem !important;
    }

    /* Payment Info Styles */
    .payment-info {
      min-width: 120px;
    }

    .payment-method {
      margin-bottom: 0.25rem;
    }

    .payment-method span {
      font-size: 0.8rem;
      color: var(--text-primary);
    }

    .payment-status .badge-custom {
      font-size: 0.7rem;
      padding: 0.2rem 0.4rem;
    }

    .badge-sm {
      font-size: 0.7rem !important;
      padding: 0.2rem 0.4rem !important;
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .btn-sm-custom {
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      border-radius: 4px;
    }

    .btn-outline-custom {
      background: transparent;
      color: var(--text-primary);
      border: 1px solid var(--border-subtle);
    }

    .btn-outline-custom:hover {
      background: var(--primary-light);
      color: var(--text-primary);
    }

    /* Pagination */
    .pagination-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-subtle);
    }

    .pagination-info {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .pagination-custom {
      display: flex;
      gap: 0.5rem;
    }

    .page-link-custom {
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      text-decoration: none;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .page-link-custom:hover {
      background: var(--primary-light);
      color: var(--text-primary);
    }

    .page-link-custom.active {
      background: var(--text-primary);
      color: white;
      border-color: var(--text-primary);
    }

    .page-link-custom.disabled {
      opacity: 0.5;
      pointer-events: none;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .orders-table {
        font-size: 0.8rem;
      }

      .orders-table th,
      .orders-table td {
        padding: 0.75rem 0.5rem;
      }
    }

    @media (max-width: 768px) {
      .main-container {
        padding: 0 1rem;
      }

      .admin-header {
        padding: 2rem 0;
      }

      .admin-title {
        font-size: 2rem;
      }

      .controls-bar {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
      }

      .controls-left,
      .controls-right {
        justify-content: center;
      }

      .orders-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }

      .pagination-container {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
<!-- Навигация -->
<div th:insert="~{admin/fragments/navigation :: navigation}"></div>

<!-- Основной контент -->
<div class="main-content">
  <div class="main-container">
    <!-- Breadcrumbs -->
    <nav class="breadcrumb-container" aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/admin">Адмін панель</a></li>
        <li class="breadcrumb-item active" aria-current="page">Замовлення</li>
      </ol>
    </nav>

    <!-- Header Section -->
    <header class="admin-header">
      <div class="admin-icon">
        <i class="fas fa-shopping-cart"></i>
      </div>
      <h1 class="admin-title serif-font">Управління замовленнями</h1>
      <p class="admin-subtitle">
        Перегляд, редагування та управління всіма замовленнями магазину
      </p>
    </header>

    <!-- Alert Messages -->
    <div th:if="${successMessage}" class="alert-custom alert-success-custom">
      <i class="fas fa-check-circle me-2"></i>
      <span th:text="${successMessage}"></span>
    </div>

    <div th:if="${errorMessage}" class="alert-custom alert-error-custom">
      <i class="fas fa-exclamation-triangle me-2"></i>
      <span th:text="${errorMessage}"></span>
    </div>

    <!-- Main Section -->
    <section class="admin-section">
      <div class="admin-container">
        <!-- Controls Bar -->
        <div class="controls-bar">
          <div class="controls-left">
                            <span class="text-muted">
                                <strong th:text="${orders.metadata.totalElements}">0</strong> замовлень знайдено
                            </span>
          </div>
          <div class="controls-right">
            <!-- Page Size Selector -->
            <select class="form-select-custom" id="pageSizeSelect" onchange="changePageSize()">
              <option value="10" th:selected="${pageSize == 10}">10 на сторінці</option>
              <option value="25" th:selected="${pageSize == 25}">25 на сторінці</option>
              <option value="50" th:selected="${pageSize == 50}">50 на сторінці</option>
            </select>

            <!-- Sort Selector -->
            <select class="form-select-custom" id="sortSelect" onchange="changeSort()">
              <option value="createdAt,desc" th:selected="${sortBy == 'createdAt' && sortDir == 'desc'}">
                Новіші спочатку
              </option>
              <option value="createdAt,asc" th:selected="${sortBy == 'createdAt' && sortDir == 'asc'}">
                Старіші спочатку
              </option>
              <option value="totalAmount,desc" th:selected="${sortBy == 'totalAmount' && sortDir == 'desc'}">
                За сумою ↓
              </option>
              <option value="totalAmount,asc" th:selected="${sortBy == 'totalAmount' && sortDir == 'asc'}">
                За сумою ↑
              </option>
              <option value="customerName,asc" th:selected="${sortBy == 'customerName' && sortDir == 'asc'}">
                За ім'ям A-Z
              </option>
            </select>
          </div>
        </div>

        <!-- Orders Table -->
        <div class="table-responsive">
          <table class="orders-table">
            <thead>
            <tr>
              <th>#</th>
              <th>Клієнт</th>
              <th>Email</th>
              <th>Телефон</th>
              <th>Сума</th>
              <th>Статус</th>
              <th>Доставка</th>
              <th>Оплата</th>
              <th>Дата</th>
              <th>Дії</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${orders.content}" th:if="${not #lists.isEmpty(orders.content)}">
              <td>
                <strong th:text="'#' + ${order.id}"></strong>
              </td>
              <td>
                <div>
                  <strong th:text="${order.customerName}"></strong>
                  <br>
                  <small class="text-muted">
                    <i class="fas fa-box me-1"></i>
                    <span th:text="${order.itemsCount}"></span> товарів
                  </small>
                </div>
              </td>
              <td>
                <a th:href="'mailto:' + ${order.email}"
                   th:text="${order.email}"
                   class="text-decoration-none"></a>
              </td>
              <td>
                <a th:href="'tel:' + ${order.phoneNumber}"
                   th:text="${order.phoneNumber}"
                   class="text-decoration-none"></a>
              </td>
              <td>
                <strong th:text="${order.formattedAmount}" class="text-success"></strong>
              </td>
              <td>
                                        <span class="badge-custom"
                                              th:classappend="${order.statusBadgeClass}"
                                              th:text="${order.statusDisplayName}"></span>
              </td>


              <td>
                                        <span class="badge-custom"
                                              th:classappend="${order.deliveryMethodBadgeClass}">
                                            <i th:class="${order.deliveryMethodIcon}" class="me-1"></i>
                                            <span th:text="${order.deliveryMethodDisplayName}"></span>
                                        </span>
              </td>

              <td>
                <div class="payment-info">
                  <div class="payment-method">
                    <small class="text-muted d-block">Спосіб:</small>
                    <span class="fw-semibold" th:text="${order.paymentMethod}">Не вказано</span>
                  </div>
                  <div class="payment-status mt-1">
                    <small class="text-muted d-block">Статус:</small>
                    <span class="badge-custom badge-sm"
                          th:classappend="${order.paymentStatus == 'Оплачено' ? 'badge-success' :
                           (order.paymentStatus == 'Очікує оплати' ? 'badge-warning' :
                           (order.paymentStatus == 'Скасовано' ? 'badge-danger' : 'badge-secondary'))}"
                          th:text="${order.paymentStatus}">
      </span>
                  </div>
                </div>
              </td>
              <td>
                <div th:text="${#temporals.format(order.createdAt, 'dd.MM.yyyy')}"></div>
                <small class="text-muted" th:text="${#temporals.format(order.createdAt, 'HH:mm')}"></small>
              </td>
              <td>
                <div class="action-buttons">
                  <a th:href="@{'/admin/orders/' + ${order.id}}"
                     class="btn-custom btn-sm-custom btn-outline-custom"
                     title="Переглянути">
                    <i class="fas fa-eye"></i>
                  </a>
                  <button type="button"
                          class="btn-custom btn-sm-custom btn-outline-custom"
                          th:onclick="'quickStatusUpdate(' + ${order.id} + ')'"
                          title="Швидке редагування">
                    <i class="fas fa-edit"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr th:if="${#lists.isEmpty(orders.content)}">
              <td colspan="9" class="text-center text-muted py-4">
                <i class="fas fa-inbox fa-2x mb-3 d-block"></i>
                Замовлення не знайдено
              </td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-container" th:if="${orders.metadata.totalPages > 1}">
          <div class="pagination-info">
            Показано <span th:text="${orders.content.size()}"></span> з
            <span th:text="${orders.metadata.totalElements}"></span> записів
          </div>

          <div class="pagination-custom">
            <!-- Previous Page -->
            <a th:href="@{/admin/orders(page=${currentPage - 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
               class="page-link-custom"
               th:classappend="${orders.metadata.first} ? 'disabled' : ''"
               th:if="${not orders.metadata.first}">
              <i class="fas fa-chevron-left"></i>
            </a>

            <!-- Page Numbers -->
            <th:block th:each="i : ${#numbers.sequence(0, orders.metadata.totalPages - 1)}"
                      th:if="${i >= (currentPage - 2) && i <= (currentPage + 2)}">
              <a th:href="@{/admin/orders(page=${i}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                 class="page-link-custom"
                 th:classappend="${i == currentPage} ? 'active' : ''"
                 th:text="${i + 1}"></a>
            </th:block>

            <!-- Next Page -->
            <a th:href="@{/admin/orders(page=${currentPage + 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
               class="page-link-custom"
               th:classappend="${orders.metadata.last} ? 'disabled' : ''"
               th:if="${not orders.metadata.last}">
              <i class="fas fa-chevron-right"></i>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- Подвал -->
<div th:insert="~{admin/fragments/footer :: footer}"></div>

<!-- JavaScript -->
<script th:replace="~{admin/fragments/navigation :: navigation-script}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Изменение размера страницы
  function changePageSize() {
    const size = document.getElementById('pageSizeSelect').value;
    const url = new URL(window.location);
    url.searchParams.set('size', size);
    url.searchParams.set('page', '0'); // Сброс на первую страницу
    window.location.href = url.toString();
  }

  // Изменение сортировки
  function changeSort() {
    const sortValue = document.getElementById('sortSelect').value;
    const [sortBy, sortDir] = sortValue.split(',');
    const url = new URL(window.location);
    url.searchParams.set('sortBy', sortBy);
    url.searchParams.set('sortDir', sortDir);
    url.searchParams.set('page', '0'); // Сброс на первую страницу
    window.location.href = url.toString();
  }

  // Быстрое обновление статуса (заготовка)
  function quickStatusUpdate(orderId) {
    // Здесь можно добавить модальное окно для быстрого изменения статуса
    window.location.href = `/admin/orders/${orderId}`;
  }

  // Подтверждение удаления
  function confirmDelete(orderId) {
    if (confirm('Ви впевнені, що хочете видалити це замовлення?')) {
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = `/admin/orders/${orderId}/delete`;
      document.body.appendChild(form);
      form.submit();
    }
  }
</script>
</body>
</html>